(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{252:function(e,t,n){e.exports=n(570)},567:function(e,t,n){},570:function(e,t,n){"use strict";n.r(t);n(253),n(255);var a=n(0),r=n.n(a),o=n(162),s=n.n(o),i=n(33),c=n.n(i),l=n(238),u=n(250),d=n(76),h=n(62),p=n(63),m=n(77),v=n(75),f=n(78),b=n(85),y=n(2),k=(n(277),n(164)),g=n(239),E=n.n(g),S=n(240),C=n.n(S),w=n(241),A=n.n(w),_=n(242),O=n.n(_),T=n(251),I=n(243),j=n.n(I),R=n(244),x=n.n(R),F=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"webviewType",get:function(){return this.props.isWeb?"internal":"vkapps"}}]),t}(y.PanelHeader),W=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this,e))).onFullScreenUpdate=function(){var e=!!document.fullscreenElement;n.setState({fullScreenEnabled:e})},n.state={fullScreenEnabled:!1},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"fullScreenToggle",value:function(){var e=t;document.fullscreenElement?e.closeFullscreen():e.openFullscreen(document.documentElement),this.onFullScreenUpdate()}},{key:"componentDidMount",value:function(){window.addEventListener("fullscreenchange",this.onFullScreenUpdate)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("fullscreenchange",this.onFullScreenUpdate)}},{key:"render",value:function(){var e=this,t=this.props;if(!t.isWeb)return r.a.createElement(y.PanelHeader,t);var n={theme:"alternate"};return n.right=r.a.createElement(y.HeaderButton,{onClick:function(){return e.fullScreenToggle()}},this.state.fullScreenEnabled?r.a.createElement(x.a,null):r.a.createElement(j.a,null)),r.a.createElement(F,Object.assign({},t,n))}}],[{key:"openFullscreen",value:function(){var e=document.body;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}},{key:"closeFullscreen",value:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}}]),t}(r.a.Component);var L=function(){function e(t){var n=this;Object(h.a)(this,e),this.callMethod=function(e,t){return new Promise(function(a,r){var o=(1e20*Math.random()).toString(32),s={method:e,params:t,request_id:o};t.access_token=n.access_token,t.v=n.v,n.requests[o]={resolve:a,reject:r,data:s},n.cartCheck(o)}).catch(function(a){var r=(a=a||{}).error_reason||a;switch(r.error_code||0){case 6:return n.cartInit(),n.callMethod(e,t);case 14:return n.showCaptcha(e,t,r)}throw r})},this.parseError=function(e){var t=e.error_data,a=e.request_id;n.requests[a]&&(n.requests[a].reject(t),delete n.requests[a])},this.parseResponse=function(e){var t=e.response,a=e.request_id;n.requests[a]&&(n.requests[a].resolve(t),delete n.requests[a])},this.connect=c.a,this.requests={},this.access_token=!1,this.view=!1,this.v=5.92,this.cart=[],this.log=!1,this.pause=!1,this.connect.subscribe(function(e){switch(e.detail.type){case"VKWebAppCallAPIMethodFailed":n.parseError(e.detail.data);break;case"VKWebAppCallAPIMethodResult":n.parseResponse(e.detail.data)}})}return Object(p.a)(e,[{key:"debug",value:function(){var e;this.log&&(e=console).log.apply(e,arguments)}},{key:"cartCheck",value:function(e,t){if(!this.pause&&(!this.interval||t)){var n=this.requests[e];return this.connect.send("VKWebAppCallAPIMethod",n.data),void this.debug("cartCheck","call",n)}this.debug("cartCheck","push"),this.cart.push(e)}},{key:"cartTick",value:function(){if(this.debug("cartTick",this.cart.length),!this.cart.length)return clearInterval(this.interval),void delete this.interval;var e=this.cart.shift();this.cartCheck(e,!0)}},{key:"cartInit",value:function(){var e=this;this.debug("cartInit"),this.interval||(this.interval=setInterval(function(){return e.cartTick()},334))}},{key:"showCaptcha",value:function(e,t,n){var a=this;if(!this.view)throw n;return this.pause=1,new Promise(function(e){var t=a.view;t.setState({popout:r.a.createElement(y.Alert,{actionsLayout:"vertical",actions:[{title:"OK",autoclose:!0}],onClose:function(){e(t.state.captchaCode),t.setState({popout:null,captchaCode:null})}},r.a.createElement("h2",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0441 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438"),r.a.createElement("img",{src:n.captcha_img,style:{width:238,borderRadius:3},alt:n.captcha_img}),r.a.createElement(y.Input,{defaultValue:"",onChange:function(e){var n=e.currentTarget.value;t.setState({captchaCode:n})}}))})}).then(function(r){a.pause=0;var o=n.captcha_sid;return a.callMethod(e,Object(d.a)({},t,{captcha_key:r,captcha_sid:o}))})}},{key:"getMethod",value:function(e){return this.callMethod.bind(this,e)}}]),e}();function V(){var e=window.location.search.substr(1).split("&").reduce(function(e,t){var n=t.split("="),a=Object(T.a)(n,2),r=a[0],o=a[1],s=r.replace(/^vk_/,""),i=decodeURIComponent(o||"");return/^vk_/.test(r)&&(e[s]=i),e},{});return e.uid=e.user_id,e}var N=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this,e))).onTouch=function(e){var t=e.currentTarget,n=t.pos,a={x:e.touches[0].clientX,y:e.touches[0].clientY};if("touchstart"!==e.type){var r=n.x-a.x,o=n.y-a.y;t.scrollLeft+=r,t.scrollTop+=o}t.pos=a},n.scrollArea=r.a.createRef(),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"getElements",value:function(){return this.scrollArea.current.querySelectorAll(this.props.selector)}},{key:"componentDidMount",value:function(){var e=this;this.getElements().forEach(function(t){t.addEventListener("touchstart",e.onTouch,!1),t.addEventListener("touchmove",e.onTouch,!1)})}},{key:"componentWillUnmount",value:function(){var e=this;this.getElements().forEach(function(t){t.removeEventListener("touchstart",e.onTouch),t.removeEventListener("touchmove",e.onTouch)})}},{key:"render",value:function(){return r.a.createElement("div",Object.assign({ref:this.scrollArea,className:"scrollArea"},this.props))}}]),t}(r.a.Component),P=n(245),D=n.n(P),K=(n(454),n(456),n(457),n(458),n(114)),M=n(163),q=n.n(M)()({});q.LOG_COLOR="var(--text_primary)",q.BASE_BACKGROUND_COLOR="transparent",q.LOG_ERROR_BACKGROUND="#fff0f0",q.LOG_ERROR_BORDER="#ffd6d7",q.LOG_WARN_BACKGROUND="#fefbe6",q.LOG_WARN_BORDER="#fff5c4",q.TREENODE_FONT_SIZE="13px",q.BASE_FONT_SIZE="13px";var G=q,U=n(165),B=n.n(U),H=n(248),z=n.n(H),J=(n(567),{userAuth:"vk.auth('friends'); // \u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u043f\u0440\u0430\u0432\u0430\n\n// \u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c \u0438\u043d\u0444\u043e \u0438\u0437 API\nvar friends = API.friends.get({ fields: 'online' });\nvar user = API.users.get({});\n\nvar friendName = friends.items[0].first_name;\nvar userName = user[0].first_name;\n\n// \u0412\u044b\u0437\u044b\u0432\u0430\u0435\u043c prompt\nvar userNumber = prompt('\u041b\u044e\u0431\u0438\u043c\u043e\u0435 \u0447\u0438\u0441\u043b\u043e?');\n\n// \u041f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u043c\nvar hello = '\u041f\u0440\u0438\u0432\u0435\u0442 ' + userName + '\\n\u0422\u0432\u043e\u0439 \u0434\u0440\u0443\u0433: ' + friendName + '\\n\u0422\u0432\u043e\u0435 \u0447\u0438\u0441\u043b\u043e: ' + userNumber;\ndocument.body.innerHTML = '\u0412 body: ' + hello.split('\\n').join('<br>');\nconsole.log('\u0418 \u0432 \u043a\u043e\u043d\u0441\u043e\u043b\u044c:', hello);\nalert('\u0418 \u0432 alert: ' + hello);\n",groupAuth:"// \u0414\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0438\nvar group_id = 1;\nvar message = `\u041f\u0440\u0438\u0432\u0435\u0442.`;\n\n// \u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u043f\u0440\u0430\u0432\u0430\nvk.auth('messages', group_id);\n\n// \u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0434\u0438\u0430\u043b\u043e\u0433\u0438 \u0431\u0435\u0437 \u043e\u0442\u0432\u0435\u0442\u0430\nvar conversations = API.messages.getConversations({ filter: \"unanswered\", count: 200 });\nvar items = conversations.items;\nvar item;\n\n// \u0420\u0430\u0441\u0441\u044b\u043b\u0430\u0435\u043c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\nwhile(items.length) {\n    item = items.pop();\n    item.peer_id = item.conversation.peer.id;\n    item.response = API.messages.send({\n        error: 1, // \u041f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u043c \u043e\u0448\u0438\u0431\u043a\u0443 \u043a\u0430\u043a \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \n        group_id: group_id,\n        random_id: item.peer_id,\n        peer_id: item.peer_id,\n        message: message\n    });\n    console.log(item.response);\n}\n",consoleText:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 VKScripts Lite:\n- \u0417\u0430\u043f\u0443\u0441\u043a\u0430\u0439\u0442\u0435 \u0441\u043a\u0440\u0438\u043f\u0442, \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 \u043f\u043e\u043d\u0438\u043c\u0430\u0435\u0442\u0435, \u043a\u0430\u043a \u043e\u043d \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0438 \u0447\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442 \n- \u0421\u043a\u0440\u0438\u043f\u0442\u044b \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442\u0441\u044f \u043d\u0435 \u0432 \u043f\u0435\u0441\u043e\u0447\u043d\u0438\u0446\u0435 \u0438 \u0438\u043c\u0435\u044e\u0442 \u0434\u043e\u0441\u0442\u0443\u043f \u043a\u043e \u0432\u0441\u0435\u043c\u0443 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044e \n- \u0414\u043b\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0441\u043a\u0440\u0438\u043f\u0442\u0430 \u043d\u0430\u0436\u0438\u043c\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443 + \n- \u0414\u043b\u044f \u043e\u0447\u0438\u0441\u0442\u043a\u0438 \u043a\u043e\u043d\u0441\u043e\u043b\u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u0438\u0435 \u0432\u043a\u043b\u0430\u0434\u043a\u0438 \n- \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0440\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0432\u043a\u043b\u0430\u0434\u043a\u0443 \u043d\u0430 \u0432\u0435\u0441\u044c \u044d\u043a\u0440\u0430\u043d, \u043d\u0430\u0436\u0430\u0432 2 \u0440\u0430\u0437\u0430 \u043d\u0430 \u0430\u043a\u0442\u0438\u0432\u043d\u0443\u044e \u0432\u043a\u043b\u0430\u0434\u043a\u0443 \n- \u0412\u043a\u043b\u0430\u0434\u043a\u0443 \u043f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435 \u043c\u0435\u043d\u044f\u0435\u0442, \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 \u0432 \u043a\u043e\u0434\u0435 \u0435\u0441\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0430 \u0441 DOM\n- \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435: https://github.com/FlyInk13/VKScripts-Lite/\n",saveText:'\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u0441\u043a\u0440\u0438\u043f\u0442\u0430 [a-zA-Z_-0-9].\n\u041b\u0438\u0447\u043d\u044b\u0439 \u0441\u043a\u0440\u0438\u043f\u0442: ".scriptName"\n\u0417\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u043a\u0440\u0438\u043f\u0442: "scriptName:password"\n',viewAll:"\nvk.auth('');\ndocument.body.innerHTML = '';\n\nvar keys = API.storage.getKeys({\n    global: 1,\n});\n\nvar df = document.createDocumentFragment();\n\nkeys.forEach((key) => {\n    var link = document.createElement('a');\n    link.style.display = 'block';\n    link.target = '_blank';\n    link.href = 'https://vk.com/app6979558#' + key;\n    link.textContent = key;\n    df.appendChild(link);\n});\n\ndocument.body.appendChild(df);\n",sendKeyboard:'\nconst group_id = 181108510;\n\n// \u0420\u0430\u0437\u0440\u0435\u0448\u0430\u0435\u043c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0433\u0440\u0443\u043f\u043f\u044b\nvk.connect("VKWebAppAllowMessagesFromGroup", { group_id });\n// \u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0442\u043e\u043a\u0435\u043d \u0433\u0440\u0443\u043f\u043f\u044b\nvk.auth(\'messages\', group_id); \n\n// \u0412\u044b\u0437\u044b\u0432\u0430\u0435\u043c \u043c\u0435\u0442\u043e\u0434\nconst response = API.messages.send({\n    peer_id: 61351294,\n    message: \'test\',\n    keyboard: JSON.stringify({\n        "one_time": false,\n        "buttons": [\n            [{\n                "action": {\n                    "type": "location",\n                    "payload": "{\\"button\\": \\"1\\"}"\n                }\n            }],\n            [{\n                "action": {\n                    "type": "open_app",\n                    "app_id": 6979558,\n                    "owner_id": -group_id,\n                    "hash": "sendKeyboard",\n                    "label": "\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0443"\n                }\n            }],\n            [{\n                "action": {\n                    "type": "vkpay",\n                    "hash": "action=transfer-to-group&group_id=" + group_id + "&aid=10"\n                }\n            }],\n            [{\n                    "action": {\n                        "type": "text",\n                        "payload": "{\\"button\\": \\"1\\"}",\n                        "label": "Negative"\n                    },\n                    "color": "negative"\n                },\n                {\n                    "action": {\n                        "type": "text",\n                        "payload": "{\\"button\\": \\"2\\"}",\n                        "label": "Positive"\n                    },\n                    "color": "positive"\n                },\n                {\n                    "action": {\n                        "type": "text",\n                        "payload": "{\\"button\\": \\"2\\"}",\n                        "label": "Primary"\n                    },\n                    "color": "primary"\n                },\n                {\n                    "action": {\n                        "type": "text",\n                        "payload": "{\\"button\\": \\"2\\"}",\n                        "label": "Secondary"\n                    },\n                    "color": "secondary"\n                }\n            ]\n        ]\n    })\n});\n\n// \u0412\u044b\u0432\u043e\u0434\u0438\u043c \u0434\u0430\u043d\u043d\u044b\u0435 \u0438 \u0437\u0430\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u0432\u043a\u043b\u0430\u0434\u043a\u0443\nreturn close(response);\n'}),Z=n(568),X=n(569),Y={API:1,alert:1,prompt:1,"vk.auth":1,"vk.connect":1},$="\nObject.assign(window, windowData);\nvk.access_token = window.accessToken;\ndelete window.accessToken;\nwindow.addEventListener('error', function (event) {\n  console.error('error', event.reason);\n});\nwindow.addEventListener('unhandledrejection', function (event) {\n  console.error('Unhandled promise rejection:', event.reason);\n});\nRun().then(function(res) {\n  if (typeof res !== 'undefined') {\n    console.log(res)\n  }\n}).catch(console.error)\n";var Q=function(e){var t=[];return e="async function Run() {".concat(e," }")+$,X.simple(Z.parse(e),{CallExpression:function(e){for(var n,a=e.callee,r=[];a&&"MemberExpression"===a.type;)r.push(a.property.name),a=a.object;r.unshift(a.name),n=r.join("."),(Y[a.name]||Y[n])&&("API"===a.name&&t.push({code:"vk.getMethod",pos:e.start,delete:3},{code:'("',pos:e.start+3,delete:1},{code:'")',pos:e.start+n.length}),t.push({code:"(await ",pos:e.start},{code:")",pos:e.end}))}}),t.sort(function(e,t){return t.pos-e.pos}).forEach(function(t){t.delete=t.delete||0,e=e.substr(0,t.pos)+t.code+e.substr(t.pos+t.delete)}),e},ee="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.10.0/beautify.js";var te=function(e){return("function"===typeof js_beautify?Promise.resolve(js_beautify):new Promise(function(e){var t=document.createElement("script");t.src=ee,t.onload=function(){e(js_beautify)},document.head.appendChild(t)})).then(function(t){return t(e)})},ne="//cdn.jsdelivr.net/npm/eruda";var ae,re=function(){if("undefined"===typeof eruda){var e=document.createElement("script");e.src=ne,e.onload=function(){eruda.init()},document.head.appendChild(e)}},oe=function(){return 0};c.a.subscribe(function(e){switch(e.detail.type){case"VKWebAppUpdateConfig":var t=document.createAttribute("scheme");t.value=ae?"bright_light":e.detail.data.scheme?e.detail.data.scheme:"bright_light",document.body.attributes.setNamedItem(t)}});var se=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this,e))).console={},n.api=new L,n.api.view=Object(b.a)(Object(b.a)(n)),n.state={hash:decodeURIComponent(window.location.hash.substr(1)),dark:!1,activePanel:"home",group_id:void 0,editorType:window.isWeb?"ace":"textarea",activeTab:!1,frameId:0,authData:{},value:localStorage.value||J.userAuth,logs:[{method:"info",data:[J.consoleText]}],tabs:[]},c.a.subscribe(function(e){switch(e.detail.type){case void 0:case"VKWebAppInitResult":case"VKWebAppGetUserInfoResult":case"VKWebAppCallAPIMethodResult":break;case"VKWebAppUpdateConfig":var t=!1;/dark|gray/.test(e.detail.data.scheme)&&(t=!0),n.setState({dark:t});break;case"VKWebAppAccessTokenReceived":case"VKWebAppCommunityAccessTokenReceived":var a=e.detail.data.access_token;n.api.access_token=a,n.onApiReady()||n.alert(oe,r.a.createElement("div",null,r.a.createElement("b",null,"\u041f\u043e\u043b\u0443\u0447\u0435\u043d \u043d\u043e\u0432\u044b\u0439 \u0442\u043e\u043a\u0435\u043d:"),r.a.createElement(N,{selector:"input"},r.a.createElement(y.Input,{defaultValue:a}))));break;default:console.log("new message",e.detail.type,e.detail.data)}}),n.opts={scope:"",app_id:6979558},c.a.send("VKWebAppGetUserInfo",{}),c.a.send("VKWebAppGetAuthToken",n.opts),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"codeLoad",value:function(e){var n=this;if(e){if(J[e]){var a=J[e];return this.editorGet().value=a,void this.setState({value:a})}var r=t.codeGetData(e);return this.api.callMethod("storage.get",Object(d.a)({},r)).then(function(e){r.password&&(e=B.a.decrypt(e,r.password).toString(z.a)),n.setState({value:e}),n.editorGet().value=e}).catch(function(e){n.showError(e)})}}},{key:"codeSave",value:function(e,n){var a=t.codeGetData(e);if(a.password&&(n=B.a.encrypt(n,a.password).toString()),this.codeCheckLength(n))return this.api.callMethod("storage.set",Object(d.a)({value:n},a)).then(function(t){if(!t)throw{error:t};return e})}},{key:"codeCheckLength",value:function(e){return!(e.length>4e3)||(this.alert(oe,"\u0423\u043f\u0441, \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0441\u043a\u0440\u0438\u043f\u0442, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043e\u043a\u0440\u0430\u0442\u0438\u0442\u044c"),!1)}},{key:"codeBeautify",value:function(){var e=this,t=this.state.value;te(t).then(function(t){e.setState({value:t})})}},{key:"codeSaveWindow",value:function(){var e=this,t=this.state.value;this.codeCheckLength(t)&&this.prompt(function(t){t&&e.codeSave(t,e.state.value).then(function(){e.alert(oe,r.a.createElement("div",null,r.a.createElement("b",null,"\u0421\u043a\u0440\u0438\u043f\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d"),r.a.createElement(N,{selector:"input"},r.a.createElement(y.Input,{defaultValue:"https://vk.com/app6979558#"+t}))))}).catch(function(t){e.showError(t)})},r.a.createElement("span",{style:{whiteSpace:"pre-line"}},J.saveText))}},{key:"codeView",value:function(){this.alert(oe,r.a.createElement(N,{selector:"textarea"},r.a.createElement(y.Textarea,{value:Q(this.state.value)})))}},{key:"showError",value:function(e){this.alert(oe,r.a.createElement(N,{selector:"textarea"},r.a.createElement(y.Textarea,{defaultValue:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430:\n"+JSON.stringify(e,null,3)})))}},{key:"codeCreateFrame",value:function(e){var t,n=this,a=e.item.contentWindow,o=a.console,s=a.Function,i=this.state.token;Object(K.Hook)(o,function(e){n.setState(function(t){var n=Object(K.Decode)(e),a=Object(u.a)(t.logs);return a.push(n),{logs:a}})});try{t=new s("console","windowData",Q(this.state.value)).bind(a)}catch(d){return o.error(d),!1}var l=t.bind(a,o,{connect:c.a,accessToken:i,auth:function(e,t){return n.auth(e,t)},prompt:function(e,t){return new Promise(function(a){return n.prompt(a,e.toString(),t)})},alert:function(e){return new Promise(function(t){n.alert(t,r.a.createElement(N,{selector:"textarea"},r.a.createElement(y.Textarea,{defaultValue:e?e.toString():e})))})},Args:V(),connectRequest:function(e,t){return k.a.send(e,t)},close:function(t){return setTimeout(function(){return n.tabClose(e)},10),t}});try{l()}catch(d){return o.error(d),!1}return!0}},{key:"codeStartScript",value:function(){var e=this,t=document.createElement("iframe"),n=this.state.frameId+1,a="Tab"+n,r=this.state.tabs,o={type:"Frame",name:a,item:t};t.src="./iframe.html?1#"+a,t.style.display="none",this.refs.tabsContent.appendChild(t),r.push(o),this.setState({tabs:r,frameId:n}),/document/.test(this.state.value)&&this.tabSwitch(o),t.onload=function(){e.codeCreateFrame(o)||e.tabClose(o)}}},{key:"codeOnUpdate",value:function(e){localStorage.value=e,this.setState({value:e})}},{key:"editorGet",value:function(){return"ace"===this.state.editorType?document.getElementById("ace_editor"):this.refs.editorTextarea}},{key:"editorToggle",value:function(){var e=this,t="ace"===this.state.editorType?"textarea":"ace";this.setState({editorType:t}),setTimeout(function(){return e.onResize()},100)}},{key:"tabFullscreenExit",value:function(){this.state.activeTab.item.classList.remove("fullScreenTab"),this.refs.splitContentWrap.classList.remove("needFullScreenTab"),this.setState({lastClick:null,tabFullScreen:!1}),this.onResize()}},{key:"tabFullscreen",value:function(e){var t=this.state.activeTab,n=this.state.lastClick,a=Date.now()-n;if(t===e&&a<400)return e.item.classList.toggle("fullScreenTab"),this.refs.splitContentWrap.classList.toggle("needFullScreenTab"),this.setState({lastClick:null,tabFullScreen:!0}),void this.onResize();this.setState({lastClick:Date.now()})}},{key:"tabSwitch",value:function(e){this.tabFullscreen(e)||(this.state.activeTab.item.style.display="none",e.item.style.display="block",this.setState({activeTab:e}))}},{key:"tabClose",value:function(e,t){if("Console"!==e.name){var n=this.state.tabs,a=n.findIndex(function(t){return t===e});n.splice(a,1),e.item.outerHTML="";var r=n[a]||n[a-1]||n[0];if(this.tabSwitch(r),this.setState({tabs:n}),t)return t.cancelBubble=!0,t.stopPropagation(),!1}else this.setState({logs:[]})}},{key:"onResize",value:function(){var e=this.editorGet(),t=this.refs.editorWrap,n=this.refs.tabsContent,a=n.parentNode;t&&(e.style.width=t.clientWidth+"px",e.style.height=t.clientHeight-0+"px",this.setState({editorWidth:String(t.clientWidth+""),editorHeight:String(t.clientHeight-0)}),n.style.height=a.clientHeight-a.firstChild.clientHeight+"px")}},{key:"onApiReady",value:function(){if(this.state.apiReady)return!1;var e=this.state.authData;return e["-0"]=this.api.access_token,this.setState({apiReady:!0,authData:e}),this.codeLoad(this.state.hash),!0}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",function(){return e.onResize()}),this.onResize();var t={type:"Console",name:"Console",item:this.refs.consoleOutput};this.setState({activeTab:t,tabs:[t]})}},{key:"auth",value:function(e,t){var n=this,a=[e,t=t||0].join("-");return Promise.resolve().then(function(){if(n.state.authData[a])return{data:{access_token:n.state.authData[a]}};var r=Object(d.a)({},n.opts,{scope:e}),o="VKWebAppGetAuthToken";return t&&(r.group_id=t,o="VKWebAppGetCommunityAuthToken"),k.a.send(o,r)}).then(function(e){var t=e.data.access_token,r=n.state.authData;return r[a]=t,n.setState({authData:r}),t})}},{key:"promptSubmit",value:function(e){this.state.promptCallback(e),this.setState({popout:null,promptValue:null,promptCallback:null})}},{key:"prompt",value:function(e,t,n){var a=this;n=n||"",this.setState({promptValue:n,promptCallback:e,popout:r.a.createElement(y.Alert,{actionsLayout:"vertical",actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",style:"cancel",autoclose:!0},{title:"\u041e\u043a",action:function(){return a.promptSubmit(a.state.promptValue)}}],onClose:function(){return a.promptSubmit(null)}},r.a.createElement("h2",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"),r.a.createElement("p",null,t),r.a.createElement(N,{selector:"input"},r.a.createElement(y.Input,{defaultValue:n,onChange:function(e){return a.setState({promptValue:e.target.value})}})))})}},{key:"alert",value:function(e,t){var n=this;this.setState({popout:r.a.createElement(y.Alert,{actionsLayout:"vertical",actions:[{title:"OK",autoclose:!0}],onClose:function(){n.setState({popout:null}),e()}},r.a.createElement("h2",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"),r.a.createElement("div",{className:"alertContentWarp"},t))})}},{key:"showExamples",value:function(){var e=this;this.setState({popout:r.a.createElement(y.ActionSheet,{onClose:function(){return e.setState({popout:null})},title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"},r.a.createElement(y.ActionSheetItem,{autoclose:!0,onClick:function(){return e.codeLoad("sendKeyboard")}},"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u044b, vk connect, close"),r.a.createElement(y.ActionSheetItem,{autoclose:!0,onClick:function(){return e.codeLoad("userAuth")}},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),r.a.createElement(y.ActionSheetItem,{autoclose:!0,onClick:function(){return e.codeLoad("groupAuth")}},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u0433\u0440\u0443\u043f\u043f\u044b"),r.a.createElement(y.ActionSheetItem,{autoclose:!0,theme:"destructive"},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"))})}},{key:"openDebugSettings",value:function(){var e=this;this.setState({popout:r.a.createElement(y.ActionSheet,{onClose:function(){return e.setState({popout:null})},title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"},r.a.createElement(y.ActionSheetItem,{autoclose:!0,onClick:function(){return re()}},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u043e\u043d\u0441\u043e\u043b\u044c"),r.a.createElement(y.ActionSheetItem,{autoclose:!0,onClick:function(){return e.codeView()}},"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043a\u043e\u0434"),r.a.createElement(y.ActionSheetItem,{autoclose:!0,onClick:function(){return e.auth().catch(function(){return 0})}},"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0442\u043e\u043a\u0435\u043d"),r.a.createElement(y.ActionSheetItem,{autoclose:!0,theme:"destructive"},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"))})}},{key:"openSettings",value:function(){var e=this;this.setState({popout:r.a.createElement(y.ActionSheet,{onClose:function(){return e.setState({popout:null})},title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"},r.a.createElement(y.ActionSheetItem,{theme:"destructive",autoclose:!0,onClick:function(){return e.openDebugSettings()}},"Debug \u043c\u0435\u043d\u044e"),r.a.createElement(y.ActionSheetItem,{autoclose:!0,onClick:function(){return e.showExamples()}},"\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0441\u043a\u0440\u0438\u043f\u0442\u043e\u0432"),r.a.createElement(y.ActionSheetItem,{autoclose:!0,onClick:function(){return e.codeSaveWindow()}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0441\u043a\u0440\u0438\u043f\u0442"),r.a.createElement(y.ActionSheetItem,{autoclose:!0,onClick:function(){return e.codeBeautify()}},"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u043a\u0440\u0430\u0441\u0438\u0432\u043e"),r.a.createElement(y.ActionSheetItem,{autoclose:!0,onClick:function(){return e.editorToggle()}},"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440"),r.a.createElement(y.ActionSheetItem,{autoclose:!0,theme:"destructive"},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"))})}},{key:"getTitle",value:function(){return this.state.tabFullScreen?this.state.activeTab.name:this.state.hash?this.state.hash:"VKScripts Lite"}},{key:"render",value:function(){var e=this;return r.a.createElement(y.View,{activePanel:"tabs",popout:this.state.popout},r.a.createElement(y.Panel,{id:"tabs",className:"panelWrapper"},r.a.createElement(W,{isWeb:window.isWeb,ref:"header",left:this.state.tabFullScreen?r.a.createElement(y.HeaderButton,{onClick:function(){return e.tabFullscreenExit()},key:"toggle_tabState"},r.a.createElement(O.a,null)):r.a.createElement(y.HeaderButton,{onClick:function(){return e.openSettings()},key:"toggle_editor"},r.a.createElement(A.a,null))},this.getTitle()),r.a.createElement("div",{className:"splitContentWrap",ref:"splitContentWrap"},r.a.createElement("div",{ref:"editorWrap",className:"editorWrap"},"ace"!==this.state.editorType?r.a.createElement("textarea",{onChange:function(t){return e.codeOnUpdate(t.target.value)},defaultValue:this.state.value,ref:"editorTextarea"}):r.a.createElement(D.a,{mode:"javascript",theme:this.state.dark?"tomorrow_night":"chrome",onChange:function(t){return e.codeOnUpdate(t)},className:"editor",value:this.state.value,name:"ace_editor",width:this.state.editorWidth,height:this.state.editorHeight,ref:"editorAce",editorProps:{$blockScrolling:!0},enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,showPrintMargin:!1})),r.a.createElement("div",{className:"consoleTabsContainer"},r.a.createElement(y.Tabs,{type:"buttons"},r.a.createElement(y.HorizontalScroll,null,this.state.tabs.map(function(t){return r.a.createElement(y.TabsItem,{key:t.name,onClick:function(){return e.tabSwitch(t)},selected:e.state.activeTab===t},r.a.createElement("span",null,t.name),r.a.createElement(E.a,{className:"tabControl tabClose",onClick:function(n){return e.tabClose(t,n)}}))}),r.a.createElement(y.TabsItem,{level:"tertiary",style:{zIndex:1e3},onClick:function(){return e.codeStartScript()}},r.a.createElement(C.a,{className:"tabControl tabStart"})))),r.a.createElement("div",{className:"tabsContent iframeWrap",ref:"tabsContent"},r.a.createElement("div",{ref:"consoleOutput"},r.a.createElement(K.Console,{logs:this.state.logs,styles:G})))))))}}],[{key:"codeGetData",value:function(e){var t,n=1,a=e;if("."===e[0]&&(a=e.substr(1),n=0),/:/.test(e)){var r=e.split(":"),o=Object(l.a)(r);a=o[0],t=(t=o.slice(1)).join(":")}return{name:e,key:a,global:n,password:t}}}]),t}(r.a.Component);c.a.send("VKWebAppInit",{}),s.a.render(r.a.createElement(se,null),document.getElementById("root"))}},[[252,1,2]]]);
//# sourceMappingURL=main.5cabf2f8.chunk.js.map