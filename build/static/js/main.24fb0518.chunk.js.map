{"version":3,"sources":["utils/FlyInkPackVKUI.js","TerminalTheme.js","examples.js","utils/codeBuilder.js","utils/beautify.js","utils/debugApp.js","App.js","index.js"],"names":["PanelHeaderInternal","this","props","isWeb","PanelHeader","PanelHeaderFull","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","onFullScreenUpdate","fullScreenEnabled","document","fullscreenElement","setState","state","self","closeFullscreen","openFullscreen","documentElement","window","addEventListener","removeEventListener","_this2","react_default","a","createElement","vkui","newProps","right","onClick","fullScreenToggle","fullscreen_exit_default","fullscreen_default","FlyInkPackVKUI_PanelHeaderInternal","assign","elem","body","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","React","Component","PromiseAPI","token","_this3","callMethod","method","params","Promise","resolve","reject","request_id","Math","random","toString","data","access_token","v","requests","cartCheck","catch","error","apiError","error_reason","error_code","cartInit","showCaptcha","parseError","error_data","parseResponse","response","connect","view","cart","log","pause","subscribe","e","detail","type","_console","console","apply","arguments","ignoreCart","interval","request","send","debug","push","length","clearInterval","shift","_this4","setInterval","cartTick","_this5","popout","actionsLayout","actions","title","autoclose","onClose","captchaCode","src","captcha_img","style","width","borderRadius","alt","defaultValue","onChange","currentTarget","value","then","captcha_key","captcha_sid","objectSpread","bind","getArgs","Args","location","search","substr","split","reduce","prev","_data$split","_data$split2","slicedToArray","keyRaw","valueRaw","key","replace","decodeURIComponent","test","uid","user_id","ScrollArea","_this6","onTouch","event","el","posOld","pos","posNew","x","touches","clientX","y","clientY","offsetX","offsetY","scrollLeft","scrollTop","scrollArea","createRef","current","querySelectorAll","selector","_this7","getElements","forEach","_this8","ref","className","ls","localStorage","warn","blankTheme","BlankTheme","examples","userAuth","groupAuth","consoleText","saveText","viewAll","sendKeyboard","acorn","require","acornWalk","awaitFunctions","API","alert","prompt","vk.auth","vk.connect","codeEnv","buildCode","code","inserts","concat","simple","parse","CallExpression","node","functionName","childNode","callee","functionPath","property","name","object","unshift","join","start","delete","end","sort","b","insert","libLink","beautify","js_beautify","script","onload","head","appendChild","loadLib","eruda","init","noop","schemeAttribute","createAttribute","scheme","attributes","setNamedItem","appearance","status_bar_style","action_bar_color","App","api","assertThisInitialized","hash","dark","activePanel","group_id","undefined","editorType","activeTab","frameId","authData","logs","tabs","onApiReady","FlyInkPackVKUI_ScrollArea","opts","scope","app_id","editorGet","codeGetData","password","AES","decrypt","UTF8","showError","encrypt","codeCheckLength","res","newCode","codeSave","whiteSpace","codeBuilder","JSON","stringify","tab","codeFunction","frameWindow","item","contentWindow","frameConsole","frameFunction","Function","accessToken","Hook","decoded","Decode","toConsumableArray","codeEval","auth","message","inputValue","connectRequest","connectPromise","close","setTimeout","tabClose","iframe","tabName","newTab","display","refs","tabsContent","tabSwitch","codeCreateFrame","newValue","getElementById","editorTextarea","onResize","classList","remove","splitContentWrap","lastClick","tabFullScreen","ping","Date","now","toggle","tabFullscreen","tabIndex","findIndex","tabItem","splice","outerHTML","tabNext","cancelBubble","stopPropagation","editor","editorWrap","tabsWrapper","parentNode","clientWidth","height","clientHeight","editorWidth","String","editorHeight","firstChild","apiReady","codeLoad","firstTab","consoleOutput","_this9","authKey","promptCallback","promptValue","callback","_this10","action","promptSubmit","target","_this11","_this12","theme","_this13","debugApp","codeView","_this14","openDebugSettings","showExamples","codeSaveWindow","codeBeautify","editorToggle","_this15","id","FlyInkPackVKUI_PanelHeaderFull","left","tabFullscreenExit","unpin_default","openSettings","settings_default","getTitle","codeOnUpdate","lib_default","mode","editorProps","$blockScrolling","enableBasicAutocompletion","enableLiveAutocompletion","showPrintMargin","map","selected","cancel_default","level","zIndex","codeStartScript","add_default","console_feed_lib","styles","ConsoleStyles","global","_name$split","_name$split2","toArray","slice","ReactDOM","render","src_App_0"],"mappings":"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","file":"static/js/main.24fb0518.chunk.js","sourcesContent":["import React from 'react';\nimport { PanelHeader, HeaderButton, Alert, Input } from '@vkontakte/vkui';\nimport connect from '@vkontakte/vkui-connect';\n\n\n// region PanelHeader\nimport Icon24Fullscreen from '@vkontakte/icons/dist/24/fullscreen';\nimport Icon24FullscreenExit from '@vkontakte/icons/dist/24/fullscreen_exit';\n\nclass PanelHeaderInternal extends PanelHeader {\n  get webviewType () {\n    const isWeb = this.props.isWeb;\n    return isWeb ? 'internal' : 'vkapps';\n  }\n}\n\nclass PanelHeaderFull extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      fullScreenEnabled: false\n    };\n  }\n\n  onFullScreenUpdate = () => {\n    const fullScreenEnabled = !!document.fullscreenElement;\n    this.setState({ fullScreenEnabled });\n  };\n\n  fullScreenToggle() {\n    const self = PanelHeaderFull;\n    if (!document.fullscreenElement) {\n      self.openFullscreen(document.documentElement);\n    } else {\n      self.closeFullscreen();\n    }\n    this.onFullScreenUpdate();\n  }\n\n  static openFullscreen() {\n    var elem = document.body;\n    if (elem.requestFullscreen) {\n      elem.requestFullscreen();\n    } else if (elem.mozRequestFullScreen) { /* Firefox */\n      elem.mozRequestFullScreen();\n    } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari and Opera */\n      elem.webkitRequestFullscreen();\n    } else if (elem.msRequestFullscreen) { /* IE/Edge */\n      elem.msRequestFullscreen();\n    }\n  }\n\n  static closeFullscreen() {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (document.mozCancelFullScreen) { /* Firefox */\n      document.mozCancelFullScreen();\n    } else if (document.webkitExitFullscreen) { /* Chrome, Safari and Opera */\n      document.webkitExitFullscreen();\n    } else if (document.msExitFullscreen) { /* IE/Edge */\n      document.msExitFullscreen();\n    }\n  }\n\n  componentDidMount() {\n    window.addEventListener('fullscreenchange', this.onFullScreenUpdate);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('fullscreenchange', this.onFullScreenUpdate);\n  }\n\n  render() {\n    const props = this.props;\n\n    if (!props.isWeb) {\n      return (\n        <PanelHeader {...props}/>\n      );\n    }\n\n    const newProps = {};\n    newProps.theme = 'alternate';\n    newProps.right = (\n      <HeaderButton onClick={() => this.fullScreenToggle()}>\n        { this.state.fullScreenEnabled ? (\n          <Icon24FullscreenExit/>\n        ) : (\n          <Icon24Fullscreen/>\n        )}\n      </HeaderButton>\n    );\n\n    return (\n      <PanelHeaderInternal {...props} {...newProps}/>\n    )\n  }\n}\n\n// endregion\n// region theme path VK App\n\nfunction SetWebTheme(isWeb) {\n  connect.subscribe((e) => {\n    switch (e.detail.type) {\n      case 'VKWebAppUpdateConfig':\n        let schemeAttribute = document.createAttribute('scheme');\n        if (isWeb) {\n          schemeAttribute.value = 'bright_light';\n        } else {\n          schemeAttribute.value = e.detail.data.scheme ? e.detail.data.scheme : 'bright_light';\n        }\n        document.body.attributes.setNamedItem(schemeAttribute);\n\n        if (e.detail.data.appearance === 'light') {\n          connect.send(\"VKWebAppSetViewSettings\", {\n            status_bar_style: \"dark\",\n            action_bar_color: \"#fff\"\n          });\n        }\n        break;\n    }\n  });\n}\n\n// region PromiseAPI\n\nclass PromiseAPI {\n  constructor(token) {\n    this.connect  = connect;\n    this.requests = {};\n    this.access_token = false;\n    this.view = false;\n    this.v = 5.92;\n    this.cart = [];\n    this.log = false;\n    this.pause = false;\n\n    this.connect.subscribe((e) => {\n      switch (e.detail.type) {\n        case 'VKWebAppCallAPIMethodFailed':\n          this.parseError(e.detail.data);\n          break;\n        case 'VKWebAppCallAPIMethodResult':\n          this.parseResponse(e.detail.data);\n          break;\n      }\n    });\n  }\n\n  debug(...args) {\n    if (!this.log) return;\n    console.log(...args);\n  }\n\n  cartCheck(request_id, ignoreCart) {\n    if (!this.pause && (!this.interval || ignoreCart)) {\n      const request = this.requests[request_id];\n      this.connect.send('VKWebAppCallAPIMethod', request.data);\n      this.debug('cartCheck', 'call', request);\n      return;\n    }\n    this.debug('cartCheck', 'push');\n    this.cart.push(request_id);\n  }\n\n  cartTick() {\n    this.debug('cartTick', this.cart.length);\n    if (!this.cart.length) {\n      clearInterval(this.interval);\n      delete this.interval;\n      return;\n    }\n    const request_id = this.cart.shift();\n    this.cartCheck(request_id, true);\n  }\n\n  cartInit() {\n    this.debug('cartInit');\n    if (this.interval) return;\n    this.interval = setInterval(() => this.cartTick(), 334);\n  }\n\n  showCaptcha(method, params, error) {\n    if (!this.view) {\n      throw error;\n    }\n\n    this.pause = 1;\n    return new Promise((resolve) => {\n      const view = this.view;\n      view.setState({\n        popout: (\n          <Alert\n            actionsLayout=\"vertical\"\n            actions={[{\n              title: 'OK',\n              autoclose: true,\n            }]}\n            onClose={() => {\n              resolve(view.state.captchaCode);\n              view.setState({ popout: null, captchaCode: null });\n            }}\n          >\n            <h2>Введите код с картинки</h2>\n            <img src={error.captcha_img} style={{ width: 238, borderRadius: 3 }} alt={error.captcha_img} />\n            <Input defaultValue='' onChange={(e) => {\n              const captchaCode = e.currentTarget.value;\n              view.setState({ captchaCode });\n            }}/>\n          </Alert>\n        )\n      });\n    }).then((captcha_key) => {\n      this.pause = 0;\n      const captcha_sid = error.captcha_sid;\n      return this.callMethod(method, {\n        ...params,\n        captcha_key,\n        captcha_sid,\n      });\n    });\n  }\n\n  getMethod(method) {\n    return this.callMethod.bind(this, method);\n  }\n\n  callMethod = (method, params) => {\n    return new Promise((resolve, reject) => {\n      const request_id = (Math.random() * 1e20).toString(32);\n      const data = { method, params, request_id };\n\n      params.access_token = this.access_token;\n      params.v = this.v;\n\n      this.requests[request_id] = {resolve, reject, data};\n      this.cartCheck(request_id);\n    }).catch((error) => {\n      error = error || {};\n      const apiError = error.error_reason || error;\n      const errorCode = apiError.error_code || 0;\n\n      switch (errorCode) {\n        case 6:\n          this.cartInit();\n          return this.callMethod(method, params);\n        case 14:\n          return this.showCaptcha(method, params, apiError);\n      }\n\n      throw apiError;\n    });\n  };\n\n  parseError = (data) => {\n    const {error_data, request_id} = data;\n    if (!this.requests[request_id]) return;\n    this.requests[request_id].reject(error_data);\n    delete this.requests[request_id];\n  };\n\n  parseResponse = (data) => {\n    const {response, request_id} = data;\n    if (!this.requests[request_id]) return;\n    this.requests[request_id].resolve(response);\n    delete this.requests[request_id];\n  };\n}\n\n\nfunction getArgs() {\n  const Args = window.location.search\n    .substr(1)\n    .split(\"&\")\n    .reduce(function parseArg(prev, data) {\n      const [keyRaw, valueRaw] = data.split(\"=\");\n      const key = keyRaw.replace(/^vk_/, '');\n      const value = decodeURIComponent(valueRaw || \"\");\n\n      if (/^vk_/.test(keyRaw)) {\n        prev[key] = value;\n      }\n\n      return prev;\n    }, {});\n\n  Args.uid = Args.user_id;\n\n  return Args;\n}\n\n\nclass ScrollArea extends React.Component {\n  constructor(props) {\n    super(props);\n    this.scrollArea = React.createRef();\n  }\n\n  onTouch = (event) => {\n    const el = event.currentTarget;\n    const posOld = el.pos;\n    const posNew = {\n      x: event.touches[0].clientX,\n      y: event.touches[0].clientY,\n    };\n\n    if (event.type !== 'touchstart') {\n      const offsetX = posOld.x - posNew.x;\n      const offsetY = posOld.y - posNew.y;\n\n      el.scrollLeft += offsetX;\n      el.scrollTop += offsetY;\n    }\n\n    el.pos = posNew;\n  };\n\n  getElements() {\n    return this.scrollArea.current.querySelectorAll(this.props.selector);\n  }\n\n  componentDidMount() {\n    this.getElements().forEach((el) => {\n      el.addEventListener('touchstart', this.onTouch, false);\n      el.addEventListener('touchmove', this.onTouch, false);\n    });\n  }\n\n  componentWillUnmount() {\n    this.getElements().forEach((el) => {\n      el.removeEventListener('touchstart', this.onTouch);\n      el.removeEventListener('touchmove', this.onTouch);\n    });\n  }\n\n  render() {\n    return <div ref={this.scrollArea} className='scrollArea' {...this.props} />;\n  }\n}\n\nlet ls = {};\n\ntry {\n  localStorage.test = 1;\n  ls = localStorage;\n} catch (e) {\n  if (console && console.warn) {\n    console.warn(\"localStorage error\");\n  }\n}\n\nexport {\n  PanelHeaderFull,\n  SetWebTheme,\n  PromiseAPI,\n  ScrollArea,\n  getArgs,\n  ls,\n};\n","import BlankTheme from 'console-feed/lib/Component/theme/default'\n\nconst blankTheme = BlankTheme({});\n\nblankTheme['LOG_COLOR'] = 'var(--text_primary)';\n\nblankTheme['BASE_BACKGROUND_COLOR'] = 'transparent';\n\nblankTheme['LOG_ERROR_BACKGROUND'] = '#fff0f0';\nblankTheme['LOG_ERROR_BORDER'] = '#ffd6d7';\n\nblankTheme['LOG_WARN_BACKGROUND'] = '#fefbe6';\nblankTheme['LOG_WARN_BORDER'] = '#fff5c4';\n\nblankTheme['TREENODE_FONT_SIZE'] = '13px';\nblankTheme['BASE_FONT_SIZE'] = '13px';\n\nexport default blankTheme;\n","const userAuth = `vk.auth('friends'); // Получаем права\n\n// Запрашиваем инфо из API\nvar friends = API.friends.get({ fields: 'online' });\nvar user = API.users.get({});\n\nvar friendName = friends.items[0].first_name;\nvar userName = user[0].first_name;\n\n// Вызываем prompt\nvar userNumber = prompt('Любимое число?');\n\n// Приветствуем\nvar hello = 'Привет ' + userName + '\\\\nТвой друг: ' + friendName + '\\\\nТвое число: ' + userNumber;\ndocument.body.innerHTML = 'В body: ' + hello.split('\\\\n').join('<br>');\nconsole.log('И в консоль:', hello);\nalert('И в alert: ' + hello);\n`;\n\nconst groupAuth = `// Данные для рассылки\nvar group_id = 1;\nvar message = \\`Привет.\\`;\n\n// Получаем права\nvk.auth('messages', group_id);\n\n// Получаем диалоги без ответа\nvar conversations = API.messages.getConversations({ filter: \"unanswered\", count: 200 });\nvar items = conversations.items;\nvar item;\n\n// Рассылаем сообщения\nwhile(items.length) {\n    item = items.pop();\n    item.peer_id = item.conversation.peer.id;\n    item.response = API.messages.send({\n        error: 1, // Принимаем ошибку как результат \n        group_id: group_id,\n        random_id: item.peer_id,\n        peer_id: item.peer_id,\n        message: message\n    });\n    console.log(item.response);\n}\n`;\n\nconst viewAll = `\nvk.auth('');\ndocument.body.innerHTML = '';\n\nvar keys = API.storage.getKeys({\n    global: 1,\n});\n\nvar df = document.createDocumentFragment();\n\nkeys.forEach((key) => {\n    var link = document.createElement('a');\n    link.style.display = 'block';\n    link.target = '_blank';\n    link.href = 'https://vk.com/app6979558#' + key;\n    link.textContent = key;\n    df.appendChild(link);\n});\n\ndocument.body.appendChild(df);\n`;\n\nconst consoleText = `Добро пожаловать в VKScripts Lite:\n- Запускайте скрипт, только если понимаете, как он работает и что делает \n- Скрипты выполняются не в песочнице и имеют доступ ко всему приложению \n- Для запуска скрипта нажимте кнопку + \n- Для очистки консоли нажмите на закрытие вкладки \n- Вы можете развернуть вкладку на весь экран, нажав 2 раза на активную вкладку \n- Вкладку при запуске меняет, только если в коде есть работа с DOM\n- Подробнее: https://github.com/FlyInk13/VKScripts-Lite/\n`;\n\nconst saveText = `Введите имя скрипта [a-zA-Z_-0-9].\nЛичный скрипт: \".scriptName\"\nЗашифрованный скрипт: \"scriptName:password\"\n`;\n\nconst sendKeyboard = `\nconst group_id = 181108510;\n\n// Разрешаем сообщения группы\nvk.connect(\"VKWebAppAllowMessagesFromGroup\", { group_id });\n// Получаем токен группы\nvk.auth('messages', group_id); \n\n// Вызываем метод\nconst response = API.messages.send({\n    peer_id: 61351294,\n    message: 'test',\n    keyboard: JSON.stringify({\n        \"one_time\": false,\n        \"buttons\": [\n            [{\n                \"action\": {\n                    \"type\": \"location\",\n                    \"payload\": \"{\\\\\"button\\\\\": \\\\\"1\\\\\"}\"\n                }\n            }],\n            [{\n                \"action\": {\n                    \"type\": \"open_app\",\n                    \"app_id\": 6979558,\n                    \"owner_id\": -group_id,\n                    \"hash\": \"sendKeyboard\",\n                    \"label\": \"Отправить клавиатуру\"\n                }\n            }],\n            [{\n                \"action\": {\n                    \"type\": \"vkpay\",\n                    \"hash\": \"action=transfer-to-group&group_id=\" + group_id + \"&aid=10\"\n                }\n            }],\n            [{\n                    \"action\": {\n                        \"type\": \"text\",\n                        \"payload\": \"{\\\\\"button\\\\\": \\\\\"1\\\\\"}\",\n                        \"label\": \"Negative\"\n                    },\n                    \"color\": \"negative\"\n                },\n                {\n                    \"action\": {\n                        \"type\": \"text\",\n                        \"payload\": \"{\\\\\"button\\\\\": \\\\\"2\\\\\"}\",\n                        \"label\": \"Positive\"\n                    },\n                    \"color\": \"positive\"\n                },\n                {\n                    \"action\": {\n                        \"type\": \"text\",\n                        \"payload\": \"{\\\\\"button\\\\\": \\\\\"2\\\\\"}\",\n                        \"label\": \"Primary\"\n                    },\n                    \"color\": \"primary\"\n                },\n                {\n                    \"action\": {\n                        \"type\": \"text\",\n                        \"payload\": \"{\\\\\"button\\\\\": \\\\\"2\\\\\"}\",\n                        \"label\": \"Secondary\"\n                    },\n                    \"color\": \"secondary\"\n                }\n            ]\n        ]\n    })\n});\n\n// Выводим данные и закрываем вкладку\nreturn close(response);\n`;\n\nexport default {\n  userAuth,\n  groupAuth,\n  consoleText,\n  saveText,\n  viewAll,\n  sendKeyboard\n};\n","const acorn = require('acorn');\nconst acornWalk = require('acorn-walk');\nconst awaitFunctions = {\n  'API': 1,\n  'alert': 1,\n  'prompt': 1,\n  'vk.auth': 1,\n  'vk.connect': 1,\n};\nconst codeEnv = `\nObject.assign(window, windowData);\nvk.access_token = window.accessToken;\ndelete window.accessToken;\nwindow.addEventListener('error', function (event) {\n  console.error('error', event.reason);\n});\nwindow.addEventListener('unhandledrejection', function (event) {\n  console.error('Unhandled promise rejection:', event.reason);\n});\nRun().then(function(res) {\n  if (typeof res !== 'undefined') {\n    console.log(res)\n  }\n}).catch(console.error)\n`;\n\nfunction buildCode(code) {\n  const inserts = [];\n\n  code = `async function Run() {${code} }` + codeEnv;\n  acornWalk.simple(acorn.parse(code), {\n    CallExpression(node) {\n\n      let childNode = node.callee;\n      const functionPath = [];\n      let functionName = '';\n      while (childNode && childNode.type === 'MemberExpression') {\n        functionPath.push(childNode.property.name);\n        childNode = childNode.object;\n      }\n\n      functionPath.unshift(childNode.name);\n      functionName = functionPath.join('.');\n\n      if (!awaitFunctions[childNode.name] && !awaitFunctions[functionName]) return;\n\n      if (childNode.name === 'API') {\n        inserts.push({\n          code: 'vk.getMethod',\n          pos: node.start,\n          delete: 3,\n        },{\n          code: '(\"',\n          pos: node.start + 3,\n          delete: 1,\n        }, {\n          code: '\")',\n          pos: node.start + functionName.length,\n        });\n      }\n\n      inserts.push({\n        code: '(await ',\n        pos: node.start,\n      }, {\n        code: ')',\n        pos: node.end,\n      });\n    }\n  });\n\n  inserts.sort((a, b) => {\n    return b.pos - a.pos;\n  }).forEach(function insertToCode(insert) {\n    insert.delete = insert.delete || 0;\n    code = code.substr(0, insert.pos) + insert.code + code.substr(insert.pos + insert.delete);\n  });\n\n  return code;\n}\n\nexport default buildCode;\n","/* global js_beautify */\n\nconst libLink = 'https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.10.0/beautify.js';\n\nfunction loadLib() {\n  if (typeof js_beautify === 'function') {\n    return Promise.resolve(js_beautify);\n  }\n\n  return new Promise((resolve) => {\n    const script = document.createElement('script');\n\n    script.src = libLink;\n    script.onload = () => {\n      resolve(js_beautify);\n    };\n\n    document.head.appendChild(script);\n  });\n}\n\nfunction beautify(code) {\n  return loadLib().then((beautify) => {\n    return beautify(code);\n  });\n}\n\nexport default beautify;\n","/* global eruda */\n\nconst libLink = '//cdn.jsdelivr.net/npm/eruda';\n\nfunction loadLib() {\n  if (typeof eruda !== 'undefined') {\n    return;\n  }\n\n  const script = document.createElement('script');\n\n  script.src = libLink;\n  script.onload = () => {\n    eruda.init();\n  };\n\n  document.head.appendChild(script);\n}\n\nexport default loadLib;\n","import React from 'react';\nimport {\n  ActionSheet,\n  ActionSheetItem,\n  HeaderButton,\n  HorizontalScroll,\n  Input,\n  Panel,\n  Tabs,\n  TabsItem,\n  View,\n  Alert,\n  Textarea,\n} from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport connect from '@vkontakte/vkui-connect';\nimport connectPromise from '@vkontakte/vkui-connect-promise';\n\n// Icons\nimport Icon16Cancel from '@vkontakte/icons/dist/16/cancel';\nimport Icon16Add from '@vkontakte/icons/dist/16/add';\nimport Icon24Settings from '@vkontakte/icons/dist/24/settings';\nimport Icon24Unpin from '@vkontakte/icons/dist/24/unpin';\n\n// Elements\nimport {\n  PanelHeaderFull, PromiseAPI,\n  SetWebTheme, getArgs,\n  ScrollArea, ls,\n} from './utils/FlyInkPackVKUI';\n\n// Ace\nimport AceEditor from 'react-ace';\nimport 'brace/mode/javascript';\nimport 'brace/theme/chrome';\nimport 'brace/theme/tomorrow_night';\nimport 'brace/ext/language_tools';\n\n// Terminal\nimport {Console, Decode, Hook} from 'console-feed';\nimport ConsoleStyles from './TerminalTheme';\n\n// Crypt\nimport AES from 'crypto-js/aes';\nimport UTF8 from 'crypto-js/enc-utf8';\n\n// App\nimport './App.css';\nimport examples from './examples.js';\nimport codeBuilder from './utils/codeBuilder.js';\nimport beautify from './utils/beautify.js';\nimport debugApp from './utils/debugApp.js';\n\nconst TabTypeConsole = 'Console';\nconst TabTypeFrame = 'Frame';\nconst TabNameConsole = 'Console';\nconst noop = () => 0;\n\nSetWebTheme();\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.console = {};\n    this.api = new PromiseAPI();\n    this.api.view = this;\n    this.state = {\n      hash: decodeURIComponent(window.location.hash.substr(1)),\n      dark: false,\n      activePanel: 'home',\n      group_id: undefined,\n      editorType: (window.isWeb ? 'ace' : 'textarea'),\n      activeTab: false, // componentDidMount\n      frameId: 0,\n      authData: { },\n      value: ls.value || examples.userAuth,\n      logs: [\n        {\n          method: \"info\",\n          data: [examples.consoleText]\n        }\n      ],\n      tabs: []\n    };\n\n    connect.subscribe((event) => {\n      switch(event.detail.type) {\n        case undefined:\n        case 'VKWebAppInitResult':\n        case 'VKWebAppGetUserInfoResult':\n        case 'VKWebAppCallAPIMethodResult':\n          break;\n        case 'VKWebAppUpdateConfig':\n          let dark = false;\n          if (/dark|gray/.test(event.detail.data.scheme)) {\n            dark = true;\n          }\n          this.setState({ dark });\n          break;\n        case 'VKWebAppAccessTokenReceived':\n        case 'VKWebAppCommunityAccessTokenReceived':\n          const token = event.detail.data.access_token;\n\n          this.api.access_token = token;\n          if (!this.onApiReady()) {\n            this.alert(noop, (\n              <div>\n                <b>Получен новый токен:</b>\n                <ScrollArea selector='input'>\n                  <Input defaultValue={token}/>\n                </ScrollArea>\n              </div>\n            ));\n          }\n          break;\n        default:\n          console.log('new message', event.detail.type, event.detail.data);\n      }\n    });\n\n    this.opts = {\n      scope: '',\n      app_id: 6979558\n    };\n\n    connect.send('VKWebAppGetUserInfo', {});\n    connect.send('VKWebAppGetAuthToken', this.opts);\n  }\n\n  static codeGetData(name) {\n    let global = 1;\n    let key = name;\n    let password;\n\n    if (name[0] === '.') {\n      key = name.substr(1);\n      global = 0;\n    }\n\n    if (/:/.test(name)) {\n      [key, ...password] = name.split(':');\n      password = password.join(':');\n    }\n\n    return { name, key, global, password };\n  }\n\n  codeLoad(key) {\n    if (!key) return;\n\n    if (examples[key]) {\n      const value = examples[key];\n      this.editorGet().value = value;\n      this.setState({ value });\n      return;\n    }\n\n    const data = App.codeGetData(key);\n    return this.api.callMethod('storage.get', {\n      ...data\n    }).then((value) => {\n      if (data.password) {\n        value = AES.decrypt(value, data.password).toString(UTF8);\n      }\n\n      this.setState({ value });\n      this.editorGet().value = value;\n    }).catch((e) => {\n      this.showError(e);\n    });\n  }\n\n  codeSave(key, value) {\n    const data = App.codeGetData(key);\n\n    if (data.password) {\n      value = AES.encrypt(value, data.password).toString();\n    }\n\n    if (!this.codeCheckLength(value)) {\n      return;\n    }\n\n    return this.api.callMethod('storage.set', {\n      value, ...data\n    }).then((res) => {\n      if (!res) throw { error: res };\n      return key;\n    })\n  }\n\n  codeCheckLength(code) {\n    if (code.length > 4000) {\n      this.alert(noop, 'Упс, слишком большой скрипт, попробуйте сократить');\n      return false;\n    }\n    return true;\n  }\n\n  codeBeautify() {\n    const code = this.state.value;\n    beautify(code).then((newCode) => {\n      this.setState({\n        value: newCode\n      });\n    });\n  }\n\n  codeSaveWindow() {\n    const code = this.state.value;\n    if (!this.codeCheckLength(code)) {\n      return;\n    }\n\n    this.prompt((name) => {\n      if (!name) return;\n\n      this.codeSave(name, this.state.value).then(() => {\n        this.alert(noop, (\n          <div>\n            <b>Скрипт успешно сохранен</b>\n            <ScrollArea selector='input'>\n              <Input defaultValue={'https://vk.com/app6979558#' + name}/>\n            </ScrollArea>\n          </div>\n        ));\n      }).catch((e) => {\n        this.showError(e);\n      });\n    },\n      <span style={{ whiteSpace: 'pre-line' }}>\n        {examples.saveText}\n      </span>\n    );\n  }\n\n  codeView() {\n    this.alert(noop, (\n      <ScrollArea selector='textarea'>\n        <Textarea value={codeBuilder(this.state.value)}/>\n      </ScrollArea>\n    ));\n  }\n\n\n  showError(e) {\n    this.alert(noop, (\n      <ScrollArea selector='textarea'>\n        <Textarea defaultValue={'Произошла ошибка:\\n' + JSON.stringify(e, null, 3)}/>\n      </ScrollArea>\n    ));\n  }\n\n  codeCreateFrame(tab) {\n    const iframe = tab.item;\n    const frameWindow = iframe.contentWindow;\n    const frameConsole = frameWindow.console;\n    const frameFunction = frameWindow.Function;\n    const accessToken = this.state.token;\n    let codeFunction;\n    let frameCode;\n\n    Hook(frameConsole, (log) => {\n      this.setState((state) => {\n        const decoded = Decode(log);\n        const logs = [...state.logs];\n        logs.push(decoded);\n        return {logs};\n      });\n    });\n\n    try {\n      frameCode = codeBuilder(this.state.value);\n      codeFunction = new frameFunction('console', 'windowData', frameCode).bind(frameWindow);\n    } catch (e) {\n      frameConsole.error(e);\n      return false;\n    }\n\n    const codeEval = codeFunction.bind(\n      frameWindow,\n      frameConsole,\n      {\n        connect,\n        accessToken,\n        auth: (scope, group_id) => this.auth(scope, group_id),\n        prompt: (message, inputValue) => new Promise((resolve) => this.prompt(resolve, message.toString(), inputValue)),\n        alert: (message) => new Promise((resolve) => {\n          this.alert(resolve, (\n            <ScrollArea selector='textarea'>\n              <Textarea defaultValue={message ? message.toString() : message}/>\n            </ScrollArea>\n          ))\n        }),\n        Args: getArgs(),\n        connectRequest: (event, data) => connectPromise.send(event, data),\n        close: (res) => {\n          setTimeout(() => this.tabClose(tab), 10);\n          return res;\n        },\n      }\n    );\n\n    try {\n      codeEval();\n    } catch (e) {\n      frameConsole.error(e);\n      return false;\n    }\n\n    return true;\n  }\n\n  codeStartScript() {\n    const iframe = document.createElement('iframe');\n    const frameId = this.state.frameId + 1;\n    const tabName = 'Tab' + frameId;\n    const tabs = this.state.tabs;\n    const newTab = {\n      type: TabTypeFrame,\n      name: tabName,\n      item: iframe\n    };\n\n    iframe.src = './iframe.html?1#' + tabName;\n    iframe.style.display = 'none';\n    this.refs.tabsContent.appendChild(iframe);\n    tabs.push(newTab);\n    this.setState({tabs, frameId});\n    if (/document/.test(this.state.value)) {\n      this.tabSwitch(newTab);\n    }\n\n    iframe.onload = () => {\n      const response = this.codeCreateFrame(newTab);\n\n      if (!response) {\n        this.tabClose(newTab);\n      }\n    };\n  }\n\n  codeOnUpdate(newValue) {\n    ls.value = newValue;\n    this.setState({\n      value: newValue\n    });\n  }\n\n\n  editorGet() {\n    if (this.state.editorType === 'ace') {\n      return document.getElementById('ace_editor');\n\n    }\n\n    return this.refs.editorTextarea;\n  }\n\n  editorToggle() {\n    const editorType = this.state.editorType === 'ace' ? 'textarea' : 'ace';\n\n    this.setState({editorType});\n    setTimeout(() => this.onResize(), 100);\n  }\n\n  tabFullscreenExit() {\n    const activeTab = this.state.activeTab;\n\n    activeTab.item.classList.remove('fullScreenTab');\n    this.refs.splitContentWrap.classList.remove('needFullScreenTab');\n    this.setState({\n      lastClick: null,\n      tabFullScreen: false\n    });\n    this.onResize();\n  }\n\n  tabFullscreen(newTab) {\n    const activeTab = this.state.activeTab;\n    const lastClick = this.state.lastClick;\n    const ping = Date.now() - lastClick;\n\n    if (activeTab === newTab && ping < 400) {\n      newTab.item.classList.toggle('fullScreenTab');\n      this.refs.splitContentWrap.classList.toggle('needFullScreenTab');\n      this.setState({\n        lastClick: null,\n        tabFullScreen: true\n      });\n      this.onResize();\n      return;\n    }\n\n    this.setState({lastClick: Date.now()});\n  }\n\n  tabSwitch(newTab) {\n    if (this.tabFullscreen(newTab)) {\n      return;\n    }\n\n    const activeTab = this.state.activeTab;\n\n    activeTab.item.style.display = 'none';\n    newTab.item.style.display = 'block';\n\n    this.setState({\n      activeTab: newTab\n    });\n  }\n\n  tabClose(tab, event) {\n    if (tab.name === TabNameConsole) {\n      this.setState({logs: []});\n      return;\n    }\n\n    const tabs = this.state.tabs;\n\n    const tabIndex = tabs.findIndex((tabItem) => tabItem === tab);\n\n    tabs.splice(tabIndex, 1);\n    tab.item.outerHTML = '';\n\n    const tabNext = tabs[tabIndex] || tabs[tabIndex - 1] || tabs[0];\n\n    this.tabSwitch(tabNext);\n    this.setState({tabs});\n\n    if (!event) return;\n    event.cancelBubble = true;\n    event.stopPropagation();\n    return false;\n  }\n\n\n  onResize() {\n    const editor = this.editorGet();\n    const editorWrap = this.refs.editorWrap;\n    const tabsContent = this.refs.tabsContent;\n    const tabsWrapper = tabsContent.parentNode;\n    const padding = 0;\n    if (!editorWrap) return;\n\n    editor.style.width = editorWrap.clientWidth + 'px';\n    editor.style.height = editorWrap.clientHeight - padding + 'px';\n    this.setState({\n      editorWidth: String(editorWrap.clientWidth + ''),\n      editorHeight: String(editorWrap.clientHeight - padding),\n    });\n\n    tabsContent.style.height = tabsWrapper.clientHeight - tabsWrapper.firstChild.clientHeight + 'px';\n  }\n\n  onApiReady() {\n    if (this.state.apiReady) {\n      return false;\n    }\n\n    const authData = this.state.authData;\n    authData['-0'] =  this.api.access_token;\n    this.setState({ apiReady: true, authData });\n\n    this.codeLoad(this.state.hash);\n    return true;\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', () => this.onResize());\n    this.onResize();\n\n    const firstTab = {\n      type: TabTypeConsole,\n      name: TabNameConsole,\n      item: this.refs.consoleOutput\n    };\n\n    this.setState({\n      activeTab: firstTab,\n      tabs: [firstTab]\n    });\n  }\n\n  auth(scope, group_id) {\n    group_id = group_id || 0;\n    const authKey = [scope, group_id].join('-');\n    return Promise.resolve().then(() => {\n      if (this.state.authData[authKey]) {\n        const access_token = this.state.authData[authKey];\n        return { data: { access_token }};\n      }\n\n      const opts = { ...this.opts, scope };\n      let method = 'VKWebAppGetAuthToken';\n\n      if (group_id) {\n        opts.group_id = group_id;\n        method = 'VKWebAppGetCommunityAuthToken';\n      }\n\n      return connectPromise.send(method, opts);\n    }).then((data) => {\n      const token = data.data.access_token;\n      const authData = this.state.authData;\n      authData[authKey] = token;\n      this.setState({ authData });\n      return token;\n    })\n  }\n\n  promptSubmit(value) {\n    this.state.promptCallback(value);\n    this.setState({\n      popout: null,\n      promptValue: null,\n      promptCallback: null,\n    });\n  }\n\n  prompt(callback, title, value) {\n    value = value || '';\n\n    this.setState({\n      promptValue: value,\n      promptCallback: callback,\n      popout: (\n        <Alert\n          actionsLayout=\"vertical\"\n          actions={[{\n            title: 'Отмена',\n            style: 'cancel',\n            autoclose: true,\n          }, {\n            title: 'Ок',\n            action: () => this.promptSubmit(this.state.promptValue)\n          }]}\n          onClose={() => this.promptSubmit(null)}\n        >\n          <h2>Подтвердите действие</h2>\n          <p>{title}</p>\n          <ScrollArea selector='input'>\n            <Input defaultValue={value} onChange={(event) => this.setState({promptValue: event.target.value})}/>\n          </ScrollArea>\n        </Alert>\n      )\n    });\n  }\n\n  alert(callback, data) {\n    this.setState({\n      popout: (\n        <Alert\n          actionsLayout=\"vertical\"\n          actions={[{\n            title: 'OK',\n            autoclose: true,\n          }]}\n          onClose={() => {\n            this.setState({popout: null});\n            callback();\n          }}\n        >\n          <h2>Подтвердите действие</h2>\n          <div className=\"alertContentWarp\">\n              {data}\n          </div>\n        </Alert>\n      )\n    });\n  }\n\n  showExamples() {\n    this.setState({\n      popout:\n        <ActionSheet\n          onClose={() => this.setState({popout: null})}\n          title=\"Настройки\"\n        >\n          <ActionSheetItem autoclose onClick={() => this.codeLoad('sendKeyboard')}>Отправка клавиатуры, vk connect, close</ActionSheetItem>\n          <ActionSheetItem autoclose onClick={() => this.codeLoad('userAuth')}>Авторизация пользователя</ActionSheetItem>\n          <ActionSheetItem autoclose onClick={() => this.codeLoad('groupAuth')}>Авторизация группы</ActionSheetItem>\n          <ActionSheetItem autoclose theme=\"destructive\">Закрыть</ActionSheetItem>\n        </ActionSheet>\n    });\n  }\n\n  openDebugSettings() {\n    this.setState({\n      popout:\n        <ActionSheet\n          onClose={() => this.setState({popout: null})}\n          title=\"Настройки\"\n        >\n          <ActionSheetItem autoclose onClick={() => debugApp()}>Загрузить консоль</ActionSheetItem>\n          <ActionSheetItem autoclose onClick={() => this.codeView()}>Посмотреть код</ActionSheetItem>\n          <ActionSheetItem autoclose onClick={() => this.auth().catch(() => 0)}>Сменить токен</ActionSheetItem>\n          <ActionSheetItem autoclose theme=\"destructive\">Закрыть</ActionSheetItem>\n        </ActionSheet>\n    });\n  }\n\n  openSettings() {\n    this.setState({\n      popout:\n        <ActionSheet\n          onClose={() => this.setState({popout: null})}\n          title=\"Настройки\"\n        >\n          <ActionSheetItem theme=\"destructive\" autoclose onClick={() => this.openDebugSettings()}>Debug меню</ActionSheetItem>\n          <ActionSheetItem autoclose onClick={() => this.showExamples()}>Примеры скриптов</ActionSheetItem>\n          <ActionSheetItem autoclose onClick={() => this.codeSaveWindow()}>Сохранить скрипт</ActionSheetItem>\n          <ActionSheetItem autoclose onClick={() => this.codeBeautify()}>Сделать красиво</ActionSheetItem>\n          <ActionSheetItem autoclose onClick={() => this.editorToggle()}>Сменить редактор</ActionSheetItem>\n          <ActionSheetItem autoclose theme=\"destructive\">Закрыть</ActionSheetItem>\n        </ActionSheet>\n    });\n  }\n\n  getTitle() {\n    if (this.state.tabFullScreen ) {\n      return this.state.activeTab.name;\n    }\n\n    if (this.state.hash) {\n      return this.state.hash;\n    }\n\n     return 'VKScripts Lite';\n  }\n\n  render() {\n    return (\n      <View activePanel=\"tabs\" popout={this.state.popout}>\n        <Panel id=\"tabs\" className=\"panelWrapper\">\n          <PanelHeaderFull\n            isWeb={window.isWeb}\n            ref=\"header\"\n            left={this.state.tabFullScreen ? (\n              <HeaderButton\n                onClick={() => this.tabFullscreenExit()}\n                key=\"toggle_tabState\"\n              >\n                <Icon24Unpin/>\n              </HeaderButton>\n            ) : (\n              <HeaderButton\n                onClick={() => this.openSettings()}\n                key=\"toggle_editor\"\n              >\n                <Icon24Settings/>\n              </HeaderButton>\n            )}\n          >\n            {this.getTitle()}\n          </PanelHeaderFull>\n          <div className=\"splitContentWrap\" ref='splitContentWrap'>\n            <div ref=\"editorWrap\" className=\"editorWrap\">\n              {this.state.editorType !== 'ace' ? (\n                <textarea\n                  onChange={(e) => this.codeOnUpdate(e.target.value)}\n                  defaultValue={this.state.value}\n                  ref=\"editorTextarea\"\n                />\n              ) : (\n                <AceEditor\n                  mode=\"javascript\"\n                  theme={this.state.dark ? \"tomorrow_night\" : \"chrome\"}\n                  onChange={(e) => this.codeOnUpdate(e)}\n                  className=\"editor\"\n                  value={this.state.value}\n                  name=\"ace_editor\"\n                  width={this.state.editorWidth}\n                  height={this.state.editorHeight}\n                  ref=\"editorAce\"\n                  editorProps={{$blockScrolling: true}}\n                  enableBasicAutocompletion={true}\n                  enableLiveAutocompletion={true}\n                  showPrintMargin={false}\n                />\n              )}\n            </div>\n            <div className=\"consoleTabsContainer\">\n              <Tabs type=\"buttons\">\n                <HorizontalScroll>\n                  {this.state.tabs.map((tab) =>\n                    <TabsItem\n                      key={tab.name}\n                      onClick={() => this.tabSwitch(tab)}\n                      selected={this.state.activeTab === tab}\n                    >\n                      <span>{tab.name}</span>\n                      <Icon16Cancel className=\"tabControl tabClose\" onClick={(event) => this.tabClose(tab, event)}/>\n                    </TabsItem>\n                  )}\n                  <TabsItem level=\"tertiary\" style={{zIndex: 1000}} onClick={() => this.codeStartScript()}>\n                    <Icon16Add className=\"tabControl tabStart\"/>\n                  </TabsItem>\n                </HorizontalScroll>\n              </Tabs>\n              <div className=\"tabsContent iframeWrap\" ref=\"tabsContent\">\n                <div ref=\"consoleOutput\">\n                  <Console\n                    logs={this.state.logs}\n                    styles={ConsoleStyles}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </Panel>\n      </View>\n    );\n  }\n}\n\nexport default App;\n","import 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vkui-connect';\nimport App from './App';\n// import registerServiceWorker from './sw';\n\n// Init VK App\nconnect.send('VKWebAppInit', {});\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT\n// registerServiceWorker();\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}