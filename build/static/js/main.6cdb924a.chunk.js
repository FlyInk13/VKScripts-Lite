(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{254:function(e,t,n){e.exports=n(580)},572:function(e,t,n){},580:function(e,t,n){"use strict";n.r(t);n(255),n(257);var a=n(0),o=n.n(a),r=n(165),s=n.n(r),i=n(33),c=n.n(i),l=n(252),u=n(253),d=n(64),h=n(62),p=n(63),m=n(78),v=n(76),f=n(77),b=n(85),g=n(2),k=(n(278),n(111)),y=n(242),E=n.n(y),S=n(243),w=n.n(S),C=n(244),A=n.n(C),O=n(245),_=n.n(O),T=n(246),R=n.n(T),j=n(247),I=n.n(j),F=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"webviewType",get:function(){return this.props.isWeb?"internal":"vkapps"}}]),t}(g.PanelHeader),W=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this,e))).alert=o.a.createRef(),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"getRoot",value:function(){return this.alert.current.element.current}},{key:"componentDidMount",value:function(){this.getRoot().addEventListener("touchmove",t.cancelBubble)}},{key:"componentWillUnmount",value:function(){this.getRoot().removeEventListener("touchmove",t.cancelBubble)}},{key:"render",value:function(){return o.a.createElement(g.Alert,Object.assign({ref:this.alert},this.props))}}],[{key:"cancelBubble",value:function(e){e.cancelBubble=!0}}]),t}(o.a.Component),x=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this,e))).onFullScreenUpdate=function(){var e=!!document.fullscreenElement;n.setState({fullScreenEnabled:e})},n.state={fullScreenEnabled:!1},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"fullScreenToggle",value:function(){var e=t;document.fullscreenElement?e.closeFullscreen():e.openFullscreen(document.documentElement),this.onFullScreenUpdate()}},{key:"componentDidMount",value:function(){window.addEventListener("fullscreenchange",this.onFullScreenUpdate)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("fullscreenchange",this.onFullScreenUpdate)}},{key:"render",value:function(){var e=this,t=this.props;if(!t.isWeb)return o.a.createElement(g.PanelHeader,t);var n={theme:"alternate"};return n.right=o.a.createElement(g.HeaderButton,{onClick:function(){return e.fullScreenToggle()}},this.state.fullScreenEnabled?o.a.createElement(I.a,null):o.a.createElement(R.a,null)),o.a.createElement(F,Object.assign({},t,n))}}],[{key:"openFullscreen",value:function(){var e=document.body;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}},{key:"closeFullscreen",value:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}}]),t}(o.a.Component);var L=function(){function e(t){var n=this;Object(h.a)(this,e),this.callMethod=function(e,t){return new Promise(function(a,o){var r=(1e20*Math.random()).toString(32),s={method:e,params:t,request_id:r};t.access_token=n.access_token,t.v=n.v,n.requests[r]=Object(d.a)({resolve:a,reject:o},s),n.connect.send("VKWebAppCallAPIMethod",s)}).catch(function(a){switch(a?a.error_code:0){case 6:return n.callMethod(e,t);case 14:return n.showCaptcha(e,t,a)}throw a})},this.parseError=function(e){var t=e.error_data,a=e.request_id;n.requests[a]&&(n.requests[a].reject(t),delete n.requests[a])},this.parseResponse=function(e){var t=e.response,a=e.request_id;n.requests[a]&&(n.requests[a].resolve(t),delete n.requests[a])},this.connect=c.a,this.requests={},this.access_token=!1,this.view=!1,this.v=5.92,this.connect.subscribe(function(e){switch(e.detail.type){case"VKWebAppCallAPIMethodFailed":n.parseError(e.detail.data);break;case"VKWebAppCallAPIMethodResult":n.parseResponse(e.detail.data)}})}return Object(p.a)(e,[{key:"showCaptcha",value:function(e,t,n){var a=this;if(!this.view)throw n;return new Promise(function(e){var t=a.view;t.setState({popout:o.a.createElement(g.Alert,{actionsLayout:"vertical",actions:[{title:"OK",autoclose:!0}],onClose:function(){e(t.state.captchaCode),t.setState({popout:null,captchaCode:null})}},o.a.createElement("h2",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0441 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438"),o.a.createElement("img",{src:n.captcha_img,alt:n.captcha_img}),o.a.createElement(g.Input,{onChange:function(e){var n=e.currentTarget.value;t.setState({captchaCode:n})}}))})}).then(function(o){var r=n.captcha_sid;return a.callMethod(e,Object(d.a)({},t,{captcha_key:o,captcha_sid:r}))})}},{key:"getMethod",value:function(e){return this.callMethod.bind(this,e)}}]),e}(),D=n(248),N=n.n(D),P=(n(465),n(467),n(468),n(469),n(112)),V=n(166),K=n.n(V)()({});K.LOG_COLOR="var(--text_primary)",K.BASE_BACKGROUND_COLOR="transparent",K.LOG_ERROR_BACKGROUND="#fff0f0",K.LOG_ERROR_BORDER="#ffd6d7",K.LOG_WARN_BACKGROUND="#fefbe6",K.LOG_WARN_BORDER="#fff5c4",K.TREENODE_FONT_SIZE="13px",K.BASE_FONT_SIZE="13px",console.log(K);var M=K,q=(n(572),{userAuth:"vk.auth('friends'); // \u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u043f\u0440\u0430\u0432\u0430\n\n// \u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c \u0438\u043d\u0444\u043e \u0438\u0437 API\nvar friends = API.friends.get({ fields: 'online' });\nvar user = API.users.get({});\n\nvar friendName = friends.items[0].first_name;\nvar userName = user[0].first_name;\n\n// \u0412\u044b\u0437\u044b\u0432\u0430\u0435\u043c prompt\nvar userNumber = prompt('\u041b\u044e\u0431\u0438\u043c\u043e\u0435 \u0447\u0438\u0441\u043b\u043e?');\n\n// \u041f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u043c\nvar hello = '\u041f\u0440\u0438\u0432\u0435\u0442 ' + userName + '\\n\u0422\u0432\u043e\u0439 \u0434\u0440\u0443\u0433: ' + friendName + '\\n\u0422\u0432\u043e\u0435 \u0447\u0438\u0441\u043b\u043e: ' + userNumber;\ndocument.body.innerHTML = '\u0412 body: ' + hello.split('\\n').join('<br>');\nconsole.log('\u0418 \u0432 \u043a\u043e\u043d\u0441\u043e\u043b\u044c:', hello);\nalert('\u0418 \u0432 alert: ' + hello);\n",groupAuth:"// \u0414\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0438\nvar group_id = 1;\nvar message = `\u041f\u0440\u0438\u0432\u0435\u0442.`;\n\n// \u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u043f\u0440\u0430\u0432\u0430\nvk.auth('messages', group_id);\n\n// \u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0434\u0438\u0430\u043b\u043e\u0433\u0438 \u0431\u0435\u0437 \u043e\u0442\u0432\u0435\u0442\u0430\nvar conversations = API.messages.getConversations({ filter: \"unanswered\", count: 200 });\nvar items = conversations.items;\nvar item;\n\n// \u0420\u0430\u0441\u0441\u044b\u043b\u0430\u0435\u043c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\nwhile(items.length) {\n    item = items.pop();\n    item.peer_id = item.conversation.peer.id;\n    item.response = API.messages.send({\n        error: 1, // \u041f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u043c \u043e\u0448\u0438\u0431\u043a\u0443 \u043a\u0430\u043a \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \n        group_id: group_id,\n        random_id: item.peer_id,\n        peer_id: item.peer_id,\n        message: message\n    });\n    console.log(item.response);\n}\n",consoleText:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 VKScripts Lite:\n- \u0417\u0430\u043f\u0443\u0441\u043a\u0430\u0439\u0442\u0435 \u0441\u043a\u0440\u0438\u043f\u0442, \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 \u043f\u043e\u043d\u0438\u043c\u0430\u0435\u0442\u0435, \u043a\u0430\u043a \u043e\u043d \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0438 \u0447\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442 \n- \u0421\u043a\u0440\u0438\u043f\u0442\u044b \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442\u0441\u044f \u043d\u0435 \u0432 \u043f\u0435\u0441\u043e\u0447\u043d\u0438\u0446\u0435 \u0438 \u0438\u043c\u0435\u044e\u0442 \u0434\u043e\u0441\u0442\u0443\u043f \u043a\u043e \u0432\u0441\u0435\u043c\u0443 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044e \n- \u0414\u043b\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0441\u043a\u0440\u0438\u043f\u0442\u0430 \u043d\u0430\u0436\u0438\u043c\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443 + \n- \u0414\u043b\u044f \u043e\u0447\u0438\u0441\u0442\u043a\u0438 \u043a\u043e\u043d\u0441\u043e\u043b\u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u0438\u0435 \u0432\u043a\u043b\u0430\u0434\u043a\u0438 \n- \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0440\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0432\u043a\u043b\u0430\u0434\u043a\u0443 \u043d\u0430 \u0432\u0435\u0441\u044c \u044d\u043a\u0440\u0430\u043d, \u043d\u0430\u0436\u0430\u0432 2 \u0440\u0430\u0437\u0430 \u043d\u0430 \u0430\u043a\u0442\u0438\u0432\u043d\u0443\u044e \u0432\u043a\u043b\u0430\u0434\u043a\u0443 \n- API, alert, prompt, vk.auth \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u043e\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043f\u0435\u0440\u0435\u0434 \u0441\u043e\u0431\u043e\u0439 await\n- \u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043a\u043e\u0434, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0436\u0430\u0432 \xab\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043a\u043e\u0434\xbb\n- \u0412\u043a\u043b\u0430\u0434\u043a\u0443 \u043f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435 \u043c\u0435\u043d\u044f\u0435\u0442, \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 \u0432 \u043a\u043e\u0434\u0435 \u0435\u0441\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0430 \u0441 DOM\n",saveText:'\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u0441\u043a\u0440\u0438\u043f\u0442\u0430 [a-zA-Z_-0-9].\n\u041b\u0438\u0447\u043d\u044b\u0439 \u0441\u043a\u0440\u0438\u043f\u0442: ".scriptName"\n\u0417\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u043a\u0440\u0438\u043f\u0442: "scriptName:password"\n',viewAll:"\nvk.auth('');\ndocument.body.innerHTML = '';\n\nvar keys = API.storage.getKeys({\n    global: 1,\n});\n\nvar df = document.createDocumentFragment();\n\nkeys.forEach((key) => {\n    var link = document.createElement('a');\n    link.style.display = 'block';\n    link.target = '_blank';\n    link.href = 'https://vk.com/app6979558#' + key;\n    link.textContent = key;\n    df.appendChild(link);\n});\n\ndocument.body.appendChild(df);\n",changeLog:"\u0427\u0442\u043e \u043d\u043e\u0432\u043e\u0433\u043e \u0432 1.0.0 (beta):\n* \u041d\u0430\u0447\u0430\u043b\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c acorn \u0434\u043b\u044f \u043f\u043e\u0434\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 await \u0438 \u0441\u043a\u043e\u0431\u043e\u043a \u0432 \u043d\u0443\u0436\u043d\u044b\u0435 \u043c\u0435\u0441\u0442\u0430\n* \u041d\u043e\u0432\u0430\u044f \u043e\u0431\u0435\u0440\u0442\u043a\u0430 \u043a\u043e\u0434\u0430 \u0441 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a \u0438 UnhandledRejection\n* \u0422\u0435\u043f\u0435\u0440\u044c \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c return \u0432 \u043a\u043e\u0434\u0435 \u0434\u043b\u044f \u0432\u044b\u0432\u043e\u0434\u0430 \u0432 \u043a\u043e\u043d\u0441\u043e\u043b\u044c\n* \u0411\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u0443\u0445\u043e\u0434\u0438\u0442 \u0441 \u0432\u043a\u043b\u0430\u0434\u043a\u0438 console, \u0435\u0441\u043b\u0438 \u0432 \u0441\u043a\u0440\u0438\u043f\u0442\u0435 \u043d\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u044b \u0432 DOM\n",sendKeyboard:'\nvk.auth(\'messages\', 181108510); \n\nreturn API.messages.send({\n    peer_id: 61351294,\n    message: \'test\',\n    keyboard: JSON.stringify({\n        "one_time": false,\n        "buttons": [\n            [{\n                "action": {\n                    "type": "location",\n                    "payload": "{\\"button\\": \\"1\\"}"\n                }\n            }],\n            [{\n                "action": {\n                    "type": "open_app",\n                    "app_id": 6979558,\n                    "owner_id": -181108510,\n                    "hash": "sendKeyboard",\n                    "label": "\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0443"\n                }\n            }],\n            [{\n                "action": {\n                    "type": "vkpay",\n                    "hash": "action=transfer-to-group&group_id=181108510&aid=10"\n                }\n            }],\n            [{\n                    "action": {\n                        "type": "text",\n                        "payload": "{\\"button\\": \\"1\\"}",\n                        "label": "Negative"\n                    },\n                    "color": "negative"\n                },\n                {\n                    "action": {\n                        "type": "text",\n                        "payload": "{\\"button\\": \\"2\\"}",\n                        "label": "Positive"\n                    },\n                    "color": "positive"\n                },\n                {\n                    "action": {\n                        "type": "text",\n                        "payload": "{\\"button\\": \\"2\\"}",\n                        "label": "Primary"\n                    },\n                    "color": "primary"\n                },\n                {\n                    "action": {\n                        "type": "text",\n                        "payload": "{\\"button\\": \\"2\\"}",\n                        "label": "Secondary"\n                    },\n                    "color": "secondary"\n                }\n            ]\n        ]\n    })\n});\n'}),G=n(573),U=n(574),B={API:1,alert:1,prompt:1,"vk.auth":1,"vk.connect":1},H="\nObject.assign(window, windowData);\nvk.access_token = window.accessToken;\ndelete window.accessToken;\nwindow.addEventListener('error', function (event) {\n  console.error('error', event.reason);\n});\nwindow.addEventListener('unhandledrejection', function (event) {\n  console.error('Unhandled promise rejection:', event.reason);\n});\nRun().then(function(res) {\n  if (typeof res !== 'undefined') {\n    console.log(res)\n  }\n}).catch(console.error)\n";var z=function(e){var t=[];return e="async function Run() {".concat(e," }")+H,U.simple(G.parse(e),{CallExpression:function(e){for(var n,a=e.callee,o=[];a&&"MemberExpression"===a.type;)o.push(a.property.name),a=a.object;o.unshift(a.name),n=o.join("."),(B[a.name]||B[n])&&("API"===a.name&&t.push({code:"vk.getMethod",pos:e.start,delete:3},{code:'("',pos:e.start+3,delete:1},{code:'")',pos:e.start+n.length}),t.push({code:"(await ",pos:e.start},{code:")",pos:e.end}))}}),t.sort(function(e,t){return t.pos-e.pos}).forEach(function(t){t.delete=t.delete||0,e=e.substr(0,t.pos)+t.code+e.substr(t.pos+t.delete),t.code.length}),e},J=n(113),Z=n.n(J),$=n(167),Q=n.n($);window.AES=Z.a,window.UTF8=Q.a;var X,Y=W,ee=function(){return 0};c.a.subscribe(function(e){switch(e.detail.type){case"VKWebAppInitResult":case"VKWebAppUpdateConfig":var t=document.createAttribute("scheme");t.value=X?"bright_light":e.detail.data.scheme?e.detail.data.scheme:"bright_light",document.body.attributes.setNamedItem(t)}}),window.connectPromise=k.a;var te=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this,e))).console={},n.api=new L,n.api.view=Object(b.a)(Object(b.a)(n)),n.state={hash:decodeURIComponent(window.location.hash.substr(1)),dark:!1,activePanel:"home",group_id:void 0,editorType:window.isWeb?"ace":"textarea",activeTab:!1,frameId:0,authData:{},value:localStorage.value||q.userAuth,logs:[{method:"info",data:[q.consoleText]},{method:"info",data:[q.changeLog]}],tabs:[]},c.a.subscribe(function(e){switch(e.detail.type){case"VKWebAppUpdateConfig":var t=!1;/dark|gray/.test(e.detail.data.scheme)&&(t=!0),n.setState({dark:t});break;case"VKWebAppAccessTokenReceived":case"VKWebAppCommunityAccessTokenReceived":var a=e.detail.data.access_token;n.api.access_token=a,n.onApiReady()||n.alert(ee,o.a.createElement("div",null,o.a.createElement("b",null,"\u041f\u043e\u043b\u0443\u0447\u0435\u043d \u043d\u043e\u0432\u044b\u0439 \u0442\u043e\u043a\u0435\u043d:"),o.a.createElement(g.Input,{defaultValue:a})));break;default:console.log("new message",e.detail.type,e.detail.data)}}),n.opts={scope:"",app_id:6979558},c.a.send("VKWebAppGetUserInfo",{}),c.a.send("VKWebAppGetAuthToken",n.opts),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"codeLoad",value:function(e){var n=this;if(e){if(q[e]){var a=q[e];return this.editorGet().value=a,void this.setState({value:a})}var o=t.codeGetData(e);return this.api.callMethod("storage.get",Object(d.a)({},o)).then(function(e){o.password&&(e=Z.a.decrypt(e,o.password).toString(Q.a)),n.setState({value:e}),n.editorGet().value=e}).catch(function(e){n.showError(e)})}}},{key:"codeSave",value:function(e,n){var a=t.codeGetData(e);if(a.password&&(n=Z.a.encrypt(n,a.password).toString()),this.codeCheckLength(n))return this.api.callMethod("storage.set",Object(d.a)({value:n},a)).then(function(t){if(!t)throw{error:t};return e})}},{key:"codeCheckLength",value:function(e){return!(e.length>4e3)||(this.alert(ee,"\u0423\u043f\u0441, \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0441\u043a\u0440\u0438\u043f\u0442, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043e\u043a\u0440\u0430\u0442\u0438\u0442\u044c"),!1)}},{key:"codeSaveWindow",value:function(){var e=this,t=this.state.value;this.codeCheckLength(t)&&this.prompt(function(t){t&&e.codeSave(t,e.state.value).then(function(){e.alert(ee,o.a.createElement("div",null,o.a.createElement("b",null,"\u0421\u043a\u0440\u0438\u043f\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d"),o.a.createElement(g.Input,{defaultValue:"https://vk.com/app6979558#"+t})))}).catch(function(t){e.showError(t)})},o.a.createElement("span",{style:{whiteSpace:"pre"}},q.saveText))}},{key:"codeView",value:function(){this.alert(ee,o.a.createElement(g.Textarea,{value:z(this.state.value)}))}},{key:"showError",value:function(e){this.alert(ee,o.a.createElement("pre",null,"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430:\n"+JSON.stringify(e,null,3)))}},{key:"codeCreateFrame",value:function(e){var t,n=this,a=e.item.contentWindow,o=a.console,r=a.Function,s=this.state.token;Object(P.Hook)(o,function(e){n.setState(function(t){var n=Object(P.Decode)(e),a=Object(u.a)(t.logs);return a.push(n),{logs:a}})});try{t=new r("console","windowData",z(this.state.value)).bind(a)}catch(l){return o.error(l),!1}var i=t.bind(a,o,{connect:c.a,accessToken:s,auth:function(e,t){return n.auth(e,t)},alert:function(e){return new Promise(function(t){return n.alert(t,e?e.toString():e)})},prompt:function(e,t){return new Promise(function(a){return n.prompt(a,e.toString(),t)})},connectRequest:function(e,t){return Object(k.a)(e,t)},close:function(t){return setTimeout(function(){return n.tabClose(e)},10),t}});try{i()}catch(l){return o.error(l),!1}return!0}},{key:"codeStartScript",value:function(){var e=this,t=document.createElement("iframe"),n=this.state.frameId+1,a="Tab"+n,o=this.state.tabs,r={type:"Frame",name:a,item:t};t.src="./iframe.html#"+a,t.style.display="none",this.refs.tabsContent.appendChild(t),o.push(r),this.setState({tabs:o,frameId:n}),/document/.test(this.state.value)&&this.tabSwitch(r),t.onload=function(){e.codeCreateFrame(r)||e.tabClose(r)}}},{key:"codeOnUpdate",value:function(e){localStorage.value=e,this.setState({value:e})}},{key:"editorGet",value:function(){return"ace"===this.state.editorType?document.getElementById("ace_editor"):this.refs.editorTextarea}},{key:"editorToggle",value:function(){var e=this,t="ace"===this.state.editorType?"textarea":"ace";this.setState({editorType:t}),setTimeout(function(){return e.onResize()},100)}},{key:"tabFullscreenExit",value:function(){this.state.activeTab.item.classList.remove("fullScreenTab"),this.refs.splitContentWrap.classList.remove("needFullScreenTab"),this.setState({lastClick:null,tabFullScreen:!1}),this.onResize()}},{key:"tabFullscreen",value:function(e){var t=this.state.activeTab,n=this.state.lastClick,a=Date.now()-n;if(t===e&&a<400)return e.item.classList.toggle("fullScreenTab"),this.refs.splitContentWrap.classList.toggle("needFullScreenTab"),this.setState({lastClick:null,tabFullScreen:!0}),void this.onResize();this.setState({lastClick:Date.now()})}},{key:"tabSwitch",value:function(e){this.tabFullscreen(e)||(this.state.activeTab.item.style.display="none",e.item.style.display="block",this.setState({activeTab:e}))}},{key:"tabClose",value:function(e,t){if("Console"!==e.name){var n=this.state.tabs,a=n.findIndex(function(t){return t===e});n.splice(a,1),e.item.outerHTML="";var o=n[a]||n[a-1]||n[0];if(this.tabSwitch(o),this.setState({tabs:n}),t)return t.cancelBubble=!0,t.stopPropagation(),!1}else this.setState({logs:[]})}},{key:"onResize",value:function(){var e=this.editorGet(),t=this.refs.editorWrap,n=this.refs.tabsContent,a=n.parentNode;t&&(e.style.width=t.clientWidth+"px",e.style.height=t.clientHeight-0+"px",this.setState({editorWidth:t.clientWidth,editorHeight:t.clientHeight-0}),n.style.height=a.clientHeight-a.firstChild.clientHeight+"px")}},{key:"onApiReady",value:function(){if(this.state.apiReady)return!1;var e=this.state.authData;return e["-0"]=this.api.access_token,this.setState({apiReady:!0,authData:e}),this.codeLoad(this.state.hash),!0}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",function(){return e.onResize()}),this.onResize();var t={type:"Console",name:"Console",item:this.refs.consoleOutput};this.setState({activeTab:t,tabs:[t]})}},{key:"auth",value:function(e,t){var n=this,a=[e,t=t||0].join("-");return Promise.resolve().then(function(){if(n.state.authData[a])return{data:{access_token:n.state.authData[a]}};var o=Object(d.a)({},n.opts,{scope:e}),r="VKWebAppGetAuthToken";return t&&(o.group_id=t,r="VKWebAppGetCommunityAuthToken"),k.a.send(r,o)}).then(function(e){var t=e.data.access_token,o=n.state.authData;return o[a]=t,n.setState({authData:o}),t})}},{key:"promptSubmit",value:function(e){this.state.promptCallback(e),this.setState({popout:null,promptValue:null,promptCallback:null})}},{key:"prompt",value:function(e,t,n){var a=this;n=n||"",this.setState({promptValue:n,promptCallback:e,popout:o.a.createElement(Y,{actionsLayout:"vertical",actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",style:"cancel",autoclose:!0},{title:"\u041e\u043a",action:function(){return a.promptSubmit(a.state.promptValue)}}],onClose:function(){return a.promptSubmit(null)}},o.a.createElement("h2",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"),o.a.createElement("p",null,t),o.a.createElement(g.Input,{defaultValue:n,onChange:function(e){return a.setState({promptValue:e.target.value})}}))})}},{key:"alert",value:function(e,t){var n=this;this.setState({popout:o.a.createElement(Y,{actionsLayout:"vertical",actions:[{title:"OK",autoclose:!0}],onClose:function(){n.setState({popout:null}),e()}},o.a.createElement("h2",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"),o.a.createElement("div",{className:"alertContentWarp"},t))})}},{key:"showExamples",value:function(){var e=this;this.setState({popout:o.a.createElement(g.ActionSheet,{onClose:function(){return e.setState({popout:null})},title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"},o.a.createElement(g.ActionSheetItem,{autoclose:!0,onClick:function(){return e.codeLoad("userAuth")}},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),o.a.createElement(g.ActionSheetItem,{autoclose:!0,onClick:function(){return e.codeLoad("groupAuth")}},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u0433\u0440\u0443\u043f\u043f\u044b"),o.a.createElement(g.ActionSheetItem,{autoclose:!0,theme:"destructive"},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"))})}},{key:"openDebugSettings",value:function(){var e=this;this.setState({popout:o.a.createElement(g.ActionSheet,{onClose:function(){return e.setState({popout:null})},title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"},o.a.createElement(g.ActionSheetItem,{theme:"destructive",autoclose:!0,onClick:function(){return e.codeView()}},"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043a\u043e\u0434 [debug]"),o.a.createElement(g.ActionSheetItem,{autoclose:!0,theme:"cancel"},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"))})}},{key:"openSettings",value:function(){var e=this;this.setState({popout:o.a.createElement(g.ActionSheet,{onClose:function(){return e.setState({popout:null})},title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"},o.a.createElement(g.ActionSheetItem,{theme:"destructive",autoclose:!0,onClick:function(){return e.openDebugSettings()}},"Debug \u043c\u0435\u043d\u044e"),o.a.createElement(g.ActionSheetItem,{autoclose:!0,onClick:function(){return e.showExamples()}},"\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0441\u043a\u0440\u0438\u043f\u0442\u043e\u0432"),o.a.createElement(g.ActionSheetItem,{autoclose:!0,onClick:function(){return e.codeSaveWindow()}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0441\u043a\u0440\u0438\u043f\u0442"),o.a.createElement(g.ActionSheetItem,{autoclose:!0,onClick:function(){return e.auth().catch(function(){return 0})}},"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0442\u043e\u043a\u0435\u043d"),o.a.createElement(g.ActionSheetItem,{autoclose:!0,onClick:function(){return e.editorToggle()}},"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440"),o.a.createElement(g.ActionSheetItem,{autoclose:!0,theme:"cancel"},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"))})}},{key:"getTitle",value:function(){return this.state.tabFullScreen?this.state.activeTab.name:this.state.hash?this.state.hash:"VKScripts Lite"}},{key:"render",value:function(){var e=this;return o.a.createElement(g.View,{activePanel:"tabs",popout:this.state.popout},o.a.createElement(g.Panel,{id:"tabs",className:"panelWrapper"},o.a.createElement(x,{isWeb:window.isWeb,ref:"header",left:this.state.tabFullScreen?o.a.createElement(g.HeaderButton,{onClick:function(){return e.tabFullscreenExit()},key:"toggle_tabState"},o.a.createElement(_.a,null)):o.a.createElement(g.HeaderButton,{onClick:function(){return e.openSettings()},key:"toggle_editor"},o.a.createElement(A.a,null))},this.getTitle()),o.a.createElement("div",{className:"splitContentWrap",ref:"splitContentWrap"},o.a.createElement("div",{ref:"editorWrap",className:"editorWrap"},"ace"!==this.state.editorType?o.a.createElement("textarea",{onChange:function(t){return e.codeOnUpdate(t.target.value)},defaultValue:this.state.value,ref:"editorTextarea"}):o.a.createElement(N.a,{mode:"javascript",theme:this.state.dark?"tomorrow_night":"chrome",onChange:function(t){return e.codeOnUpdate(t)},className:"editor",value:this.state.value,name:"ace_editor",width:this.state.editorWidth,height:this.state.editorHeight,ref:"editorAce",editorProps:{$blockScrolling:!0},enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,showPrintMargin:!1})),o.a.createElement("div",{className:"consoleTabsContainer"},o.a.createElement(g.Tabs,{type:"buttons"},o.a.createElement(g.HorizontalScroll,null,this.state.tabs.map(function(t){return o.a.createElement(g.TabsItem,{key:t.name,onClick:function(){return e.tabSwitch(t)},selected:e.state.activeTab===t},o.a.createElement("span",null,t.name),o.a.createElement(E.a,{className:"tabControl tabClose",onClick:function(n){return e.tabClose(t,n)}}))}),o.a.createElement(g.TabsItem,{level:"tertiary",style:{zIndex:1e3},onClick:function(){return e.codeStartScript()}},o.a.createElement(w.a,{className:"tabControl tabStart"})))),o.a.createElement("div",{className:"tabsContent iframeWrap",ref:"tabsContent"},o.a.createElement("div",{ref:"consoleOutput"},o.a.createElement(P.Console,{logs:this.state.logs,styles:M})))))))}}],[{key:"codeGetData",value:function(e){var t,n=1,a=e;if("."===e[0]&&(a=e.substr(1),n=0),/:/.test(e)){var o=e.split(":"),r=Object(l.a)(o);a=r[0],t=(t=r.slice(1)).join(":")}return{name:e,key:a,global:n,password:t}}}]),t}(o.a.Component);c.a.send("VKWebAppInit",{}),s.a.render(o.a.createElement(te,null),document.getElementById("root"))}},[[254,1,2]]]);
//# sourceMappingURL=main.6cdb924a.chunk.js.map