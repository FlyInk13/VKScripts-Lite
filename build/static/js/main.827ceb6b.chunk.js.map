{"version":3,"sources":["TerminalTheme.js","examples.js","utils/codeBuilder.js","utils/beautify.js","utils/debugApp.js","App.js","index.js"],"names":["blankTheme","BlankTheme","examples","userAuth","groupAuth","consoleText","saveText","viewAll","sendKeyboard","acorn","require","acornWalk","awaitFunctions","API","alert","prompt","vk.auth","vk.connect","codeEnv","buildCode","code","inserts","concat","simple","parse","CallExpression","node","functionName","childNode","callee","functionPath","type","push","property","name","object","unshift","join","pos","start","delete","length","end","sort","a","b","forEach","insert","substr","libLink","beautify","js_beautify","Promise","resolve","script","document","createElement","src","onload","head","appendChild","then","loadLib","eruda","init","noop","SetWebTheme","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","console","api","PromiseAPI","view","assertThisInitialized","state","hash","decodeURIComponent","window","location","dark","activePanel","group_id","undefined","editorType","isWeb","activeTab","frameId","authData","value","ls","logs","method","data","tabs","connect","subscribe","event","detail","test","scheme","setState","token","access_token","onApiReady","react_default","dist","selector","vkui","defaultValue","log","opts","scope","app_id","send","key","_this2","editorGet","callMethod","url","x","link","replace","fetch","mode","credentials","res","text","catch","e","showError","_this3","newCode","codeBuilder","JSON","stringify","tab","codeFunction","_this4","frameWindow","item","contentWindow","frameConsole","frameFunction","Function","accessToken","Hook","decoded","Decode","toConsumableArray","bind","error","codeEval","auth","message","inputValue","toString","Args","getArgs","connectRequest","connectPromise","close","setTimeout","tabClose","_this5","iframe","tabName","newTab","style","display","refs","tabsContent","tabSwitch","codeCreateFrame","newValue","getElementById","editorTextarea","_this6","onResize","classList","remove","splitContentWrap","lastClick","tabFullScreen","ping","Date","now","toggle","tabFullscreen","tabIndex","findIndex","tabItem","splice","outerHTML","tabNext","cancelBubble","stopPropagation","editor","editorWrap","tabsWrapper","parentNode","width","clientWidth","height","clientHeight","editorWidth","String","editorHeight","firstChild","apiReady","codeLoad","_this7","addEventListener","firstTab","consoleOutput","_this8","authKey","objectSpread","promptCallback","popout","promptValue","callback","title","_this9","actionsLayout","actions","autoclose","action","promptSubmit","onClose","onChange","target","_this10","className","_this11","onClick","theme","_this12","debugApp","codeView","_this13","openDebugSettings","showExamples","codeBeautify","editorToggle","_this14","id","ref","left","tabFullscreenExit","unpin_default","openSettings","settings_default","getTitle","codeOnUpdate","lib_default","editorProps","$blockScrolling","enableBasicAutocompletion","enableLiveAutocompletion","showPrintMargin","map","selected","cancel_default","level","zIndex","codeStartScript","add_default","console_feed_lib","styles","ConsoleStyles","React","Component","ReactDOM","render","src_App_0"],"mappings":"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","file":"static/js/main.827ceb6b.chunk.js","sourcesContent":["import BlankTheme from 'console-feed/lib/Component/theme/default'\n\nconst blankTheme = BlankTheme({});\n\nblankTheme['LOG_COLOR'] = 'var(--text_primary)';\n\nblankTheme['BASE_BACKGROUND_COLOR'] = 'transparent';\n\nblankTheme['LOG_ERROR_BACKGROUND'] = '#fff0f0';\nblankTheme['LOG_ERROR_BORDER'] = '#ffd6d7';\n\nblankTheme['LOG_WARN_BACKGROUND'] = '#fefbe6';\nblankTheme['LOG_WARN_BORDER'] = '#fff5c4';\n\nblankTheme['TREENODE_FONT_SIZE'] = '13px';\nblankTheme['BASE_FONT_SIZE'] = '13px';\n\nexport default blankTheme;\n","const userAuth = `vk.auth('friends'); // Получаем права\n\n// Запрашиваем инфо из API\nvar friends = API.friends.get({ fields: 'online' });\nvar user = API.users.get({});\n\nvar friendName = friends.items[0].first_name;\nvar userName = user[0].first_name;\n\n// Вызываем prompt\nvar userNumber = prompt('Любимое число?');\n\n// Приветствуем\nvar hello = 'Привет ' + userName + '\\\\nТвой друг: ' + friendName + '\\\\nТвое число: ' + userNumber;\ndocument.body.innerHTML = 'В body: ' + hello.split('\\\\n').join('<br>');\nconsole.log('И в консоль:', hello);\nalert('И в alert: ' + hello);\n`;\n\nconst groupAuth = `// Данные для рассылки\nvar group_id = 1;\nvar message = \\`Привет.\\`;\n\n// Получаем права\nvk.auth('messages', group_id);\n\n// Получаем диалоги без ответа\nvar conversations = API.messages.getConversations({ filter: \"unanswered\", count: 200 });\nvar items = conversations.items;\nvar item;\n\n// Рассылаем сообщения\nwhile(items.length) {\n    item = items.pop();\n    item.peer_id = item.conversation.peer.id;\n    item.response = API.messages.send({\n        error: 1, // Принимаем ошибку как результат \n        group_id: group_id,\n        random_id: item.peer_id,\n        peer_id: item.peer_id,\n        message: message\n    });\n    console.log(item.response);\n}\n`;\n\nconst viewAll = `\nvk.auth('');\ndocument.body.innerHTML = '';\n\nvar keys = API.storage.getKeys({\n    global: 1,\n});\n\nvar df = document.createDocumentFragment();\n\nkeys.forEach((key) => {\n    var link = document.createElement('a');\n    link.style.display = 'block';\n    link.target = '_blank';\n    link.href = 'https://vk.com/app6979558#' + key;\n    link.textContent = key;\n    df.appendChild(link);\n});\n\ndocument.body.appendChild(df);\n`;\n\nconst consoleText = `Добро пожаловать в VKScripts Lite:\n- Запускайте скрипт, только если понимаете, как он работает и что делает \n- Скрипты выполняются не в песочнице и имеют доступ ко всему приложению \n- Для запуска скрипта нажимте кнопку + \n- Для очистки консоли нажмите на закрытие вкладки \n- Вы можете развернуть вкладку на весь экран, нажав 2 раза на активную вкладку \n- Вкладку при запуске меняет, только если в коде есть работа с DOM\n- Подробнее: https://github.com/FlyInk13/VKScripts-Lite/\n`;\n\nconst saveText = `Введите имя скрипта [a-zA-Z_-0-9].\nЛичный скрипт: \".scriptName\"\nЗашифрованный скрипт: \"scriptName:password\"\n`;\n\nconst sendKeyboard = `\nconst group_id = 181108510;\n\n// Разрешаем сообщения группы\nvk.connect(\"VKWebAppAllowMessagesFromGroup\", { group_id });\n// Получаем токен группы\nvk.auth('messages', group_id); \n\n// Вызываем метод\nconst response = API.messages.send({\n    peer_id: 61351294,\n    message: 'test',\n    keyboard: JSON.stringify({\n        \"one_time\": false,\n        \"buttons\": [\n            [{\n                \"action\": {\n                    \"type\": \"location\",\n                    \"payload\": \"{\\\\\"button\\\\\": \\\\\"1\\\\\"}\"\n                }\n            }],\n            [{\n                \"action\": {\n                    \"type\": \"open_app\",\n                    \"app_id\": 6979558,\n                    \"owner_id\": -group_id,\n                    \"hash\": \"sendKeyboard\",\n                    \"label\": \"Отправить клавиатуру\"\n                }\n            }],\n            [{\n                \"action\": {\n                    \"type\": \"vkpay\",\n                    \"hash\": \"action=transfer-to-group&group_id=\" + group_id + \"&aid=10\"\n                }\n            }],\n            [{\n                    \"action\": {\n                        \"type\": \"text\",\n                        \"payload\": \"{\\\\\"button\\\\\": \\\\\"1\\\\\"}\",\n                        \"label\": \"Negative\"\n                    },\n                    \"color\": \"negative\"\n                },\n                {\n                    \"action\": {\n                        \"type\": \"text\",\n                        \"payload\": \"{\\\\\"button\\\\\": \\\\\"2\\\\\"}\",\n                        \"label\": \"Positive\"\n                    },\n                    \"color\": \"positive\"\n                },\n                {\n                    \"action\": {\n                        \"type\": \"text\",\n                        \"payload\": \"{\\\\\"button\\\\\": \\\\\"2\\\\\"}\",\n                        \"label\": \"Primary\"\n                    },\n                    \"color\": \"primary\"\n                },\n                {\n                    \"action\": {\n                        \"type\": \"text\",\n                        \"payload\": \"{\\\\\"button\\\\\": \\\\\"2\\\\\"}\",\n                        \"label\": \"Secondary\"\n                    },\n                    \"color\": \"secondary\"\n                }\n            ]\n        ]\n    })\n});\n\n// Выводим данные и закрываем вкладку\nreturn close(response);\n`;\n\nexport default {\n  userAuth,\n  groupAuth,\n  consoleText,\n  saveText,\n  viewAll,\n  sendKeyboard\n};\n","const acorn = require('acorn');\nconst acornWalk = require('acorn-walk');\nconst awaitFunctions = {\n  'API': 1,\n  'alert': 1,\n  'prompt': 1,\n  'vk.auth': 1,\n  'vk.connect': 1,\n};\nconst codeEnv = `\nObject.assign(window, windowData);\nvk.access_token = window.accessToken;\ndelete window.accessToken;\nwindow.addEventListener('error', function (event) {\n  console.error('error', event.reason);\n});\nwindow.addEventListener('unhandledrejection', function (event) {\n  console.error('Unhandled promise rejection:', event.reason);\n});\nRun().then(function(res) {\n  if (typeof res !== 'undefined') {\n    console.log(res)\n  }\n}).catch(console.error)\n`;\n\nfunction buildCode(code) {\n  const inserts = [];\n\n  code = `async function Run() {${code} }` + codeEnv;\n  acornWalk.simple(acorn.parse(code), {\n    CallExpression(node) {\n\n      let childNode = node.callee;\n      const functionPath = [];\n      let functionName = '';\n      while (childNode && childNode.type === 'MemberExpression') {\n        functionPath.push(childNode.property.name);\n        childNode = childNode.object;\n      }\n\n      functionPath.unshift(childNode.name);\n      functionName = functionPath.join('.');\n\n      if (!awaitFunctions[childNode.name] && !awaitFunctions[functionName]) return;\n\n      if (childNode.name === 'API') {\n        inserts.push({\n          code: 'vk.getMethod',\n          pos: node.start,\n          delete: 3,\n        },{\n          code: '(\"',\n          pos: node.start + 3,\n          delete: 1,\n        }, {\n          code: '\")',\n          pos: node.start + functionName.length,\n        });\n      }\n\n      inserts.push({\n        code: '(await ',\n        pos: node.start,\n      }, {\n        code: ')',\n        pos: node.end,\n      });\n    }\n  });\n\n  inserts.sort((a, b) => {\n    return b.pos - a.pos;\n  }).forEach(function insertToCode(insert) {\n    insert.delete = insert.delete || 0;\n    code = code.substr(0, insert.pos) + insert.code + code.substr(insert.pos + insert.delete);\n  });\n\n  return code;\n}\n\nexport default buildCode;\n","/* global js_beautify */\n\nconst libLink = 'https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.10.0/beautify.js';\n\nfunction loadLib() {\n  if (typeof js_beautify === 'function') {\n    return Promise.resolve(js_beautify);\n  }\n\n  return new Promise((resolve) => {\n    const script = document.createElement('script');\n\n    script.src = libLink;\n    script.onload = () => {\n      resolve(js_beautify);\n    };\n\n    document.head.appendChild(script);\n  });\n}\n\nfunction beautify(code) {\n  return loadLib().then((beautify) => {\n    return beautify(code);\n  });\n}\n\nexport default beautify;\n","/* global eruda */\n\nconst libLink = '//cdn.jsdelivr.net/npm/eruda';\n\nfunction loadLib() {\n  if (typeof eruda !== 'undefined') {\n    return;\n  }\n\n  const script = document.createElement('script');\n\n  script.src = libLink;\n  script.onload = () => {\n    eruda.init();\n  };\n\n  document.head.appendChild(script);\n}\n\nexport default loadLib;\n","import React from 'react';\nimport {\n  ActionSheet,\n  ActionSheetItem,\n  HeaderButton,\n  HorizontalScroll,\n  Input,\n  Panel,\n  Tabs,\n  TabsItem,\n  View,\n  Alert,\n  Textarea,\n} from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport connect from '@vkontakte/vkui-connect';\nimport connectPromise from '@vkontakte/vkui-connect-promise';\n\n// Icons\nimport Icon16Cancel from '@vkontakte/icons/dist/16/cancel';\nimport Icon16Add from '@vkontakte/icons/dist/16/add';\nimport Icon24Settings from '@vkontakte/icons/dist/24/settings';\nimport Icon24Unpin from '@vkontakte/icons/dist/24/unpin';\n\n// Elements\nimport {\n  PanelHeaderFull, PromiseAPI,\n  SetWebTheme, getArgs,\n  ScrollArea, ls,\n} from 'vkappsutils/dist';\n\n// Ace\nimport AceEditor from 'react-ace';\nimport 'brace/mode/javascript';\nimport 'brace/theme/chrome';\nimport 'brace/theme/tomorrow_night';\nimport 'brace/ext/language_tools';\n\n// Terminal\nimport {Console, Decode, Hook} from 'console-feed';\nimport ConsoleStyles from './TerminalTheme';\n\n// Crypt\nimport AES from 'crypto-js/aes';\nimport UTF8 from 'crypto-js/enc-utf8';\n\n// App\nimport './App.css';\nimport examples from './examples.js';\nimport codeBuilder from './utils/codeBuilder.js';\nimport beautify from './utils/beautify.js';\nimport debugApp from './utils/debugApp.js';\n\nconst TabTypeConsole = 'Console';\nconst TabTypeFrame = 'Frame';\nconst TabNameConsole = 'Console';\nconst noop = () => 0;\n\nSetWebTheme();\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.console = {};\n    this.api = new PromiseAPI();\n    this.api.view = this;\n    this.state = {\n      hash: decodeURIComponent(window.location.hash.substr(1)),\n      dark: false,\n      activePanel: 'home',\n      group_id: undefined,\n      editorType: (window.isWeb ? 'ace' : 'textarea'),\n      activeTab: false, // componentDidMount\n      frameId: 0,\n      authData: { },\n      value: ls.value || examples.userAuth,\n      logs: [\n        {\n          method: \"info\",\n          data: [examples.consoleText]\n        }\n      ],\n      tabs: []\n    };\n\n    connect.subscribe((event) => {\n      switch(event.detail.type) {\n        case undefined:\n        case 'VKWebAppInitResult':\n        case 'VKWebAppGetUserInfoResult':\n        case 'VKWebAppCallAPIMethodResult':\n          break;\n        case 'VKWebAppUpdateConfig':\n          let dark = false;\n          if (/dark|gray/.test(event.detail.data.scheme)) {\n            dark = true;\n          }\n          this.setState({ dark });\n          break;\n        case 'VKWebAppAccessTokenReceived':\n        case 'VKWebAppCommunityAccessTokenReceived':\n          const token = event.detail.data.access_token;\n\n          this.api.access_token = token;\n          if (!this.onApiReady()) {\n            this.alert(noop, (\n              <div>\n                <b>Получен новый токен:</b>\n                <ScrollArea selector='input'>\n                  <Input defaultValue={token}/>\n                </ScrollArea>\n              </div>\n            ));\n          }\n          break;\n        default:\n          console.log('new message', event.detail.type, event.detail.data);\n      }\n    });\n\n    this.opts = {\n      scope: '',\n      app_id: 6979558\n    };\n\n    connect.send('VKWebAppGetUserInfo', {});\n    connect.send('VKWebAppGetAuthToken', this.opts);\n  }\n\n  codeLoad(key) {\n    if (!key) return;\n\n    if (examples[key]) {\n      const value = examples[key];\n      this.editorGet().value = value;\n      this.setState({ value });\n      return;\n    }\n\n    if (!/(^https|cc\\/)/.test(key)) {\n      this.alert(noop, 'Хранение скриптов было основанно на storage ВКонтакте, но этот метод отключили. https://vk.com/wall-1_393145\\n\\nИсполльзуйте pastebin');\n      return;\n    }\n\n    return Promise.resolve().then(() => {\n      if (!/^cc\\//.test(key)) {\n        return key;\n      }\n      return this.api.callMethod('utils.checkLink', {\n        url: 'https://vk.' + key\n      }).then(x => x.link.replace('&amp;', '&'));\n    }).then((url) => {\n      return fetch(url, {\n        method: 'GET',\n        mode: 'cors',\n        credentials: 'same-origin',\n      });\n    }).then((res) => {\n      return res.text();\n    }).then((value) => {\n      this.setState({ value });\n      this.editorGet().value = value;\n    }).catch((e) => {\n      this.showError(e);\n    });\n  }\n\n  codeCheckLength(code) {\n    if (code.length > 4000) {\n      this.alert(noop, 'Упс, слишком большой скрипт, попробуйте сократить');\n      return false;\n    }\n    return true;\n  }\n\n  codeBeautify() {\n    const code = this.state.value;\n    beautify(code).then((newCode) => {\n      this.setState({\n        value: newCode\n      });\n    });\n  }\n\n  codeView() {\n    this.alert(noop, (\n      <ScrollArea selector='textarea'>\n        <Textarea value={codeBuilder(this.state.value)}/>\n      </ScrollArea>\n    ));\n  }\n\n\n  showError(e) {\n    this.alert(noop, (\n      <ScrollArea selector='textarea'>\n        <Textarea defaultValue={'Произошла ошибка:\\n' + JSON.stringify(e, null, 3)}/>\n      </ScrollArea>\n    ));\n  }\n\n  codeCreateFrame(tab) {\n    const iframe = tab.item;\n    const frameWindow = iframe.contentWindow;\n    const frameConsole = frameWindow.console;\n    const frameFunction = frameWindow.Function;\n    const accessToken = this.state.token;\n    let codeFunction;\n    let frameCode;\n\n    Hook(frameConsole, (log) => {\n      this.setState((state) => {\n        const decoded = Decode(log);\n        const logs = [...state.logs];\n        logs.push(decoded);\n        return {logs};\n      });\n    });\n\n    try {\n      frameCode = codeBuilder(this.state.value);\n      codeFunction = new frameFunction('console', 'windowData', frameCode).bind(frameWindow);\n    } catch (e) {\n      frameConsole.error(e);\n      return false;\n    }\n\n    const codeEval = codeFunction.bind(\n      frameWindow,\n      frameConsole,\n      {\n        connect,\n        accessToken,\n        auth: (scope, group_id) => this.auth(scope, group_id),\n        prompt: (message, inputValue) => new Promise((resolve) => this.prompt(resolve, message.toString(), inputValue)),\n        alert: (message) => new Promise((resolve) => {\n          this.alert(resolve, (\n            <ScrollArea selector='textarea'>\n              <Textarea defaultValue={message ? message.toString() : message}/>\n            </ScrollArea>\n          ))\n        }),\n        Args: getArgs(),\n        connectRequest: (event, data) => connectPromise.send(event, data),\n        close: (res) => {\n          setTimeout(() => this.tabClose(tab), 10);\n          return res;\n        },\n      }\n    );\n\n    try {\n      codeEval();\n    } catch (e) {\n      frameConsole.error(e);\n      return false;\n    }\n\n    return true;\n  }\n\n  codeStartScript() {\n    const iframe = document.createElement('iframe');\n    const frameId = this.state.frameId + 1;\n    const tabName = 'Tab' + frameId;\n    const tabs = this.state.tabs;\n    const newTab = {\n      type: TabTypeFrame,\n      name: tabName,\n      item: iframe\n    };\n\n    iframe.src = './iframe.html?1#' + tabName;\n    iframe.style.display = 'none';\n    this.refs.tabsContent.appendChild(iframe);\n    tabs.push(newTab);\n    this.setState({tabs, frameId});\n    if (/document/.test(this.state.value)) {\n      this.tabSwitch(newTab);\n    }\n\n    iframe.onload = () => {\n      const response = this.codeCreateFrame(newTab);\n\n      if (!response) {\n        this.tabClose(newTab);\n      }\n    };\n  }\n\n  codeOnUpdate(newValue) {\n    ls.value = newValue;\n    this.setState({\n      value: newValue\n    });\n  }\n\n\n  editorGet() {\n    if (this.state.editorType === 'ace') {\n      return document.getElementById('ace_editor');\n\n    }\n\n    return this.refs.editorTextarea;\n  }\n\n  editorToggle() {\n    const editorType = this.state.editorType === 'ace' ? 'textarea' : 'ace';\n\n    this.setState({editorType});\n    setTimeout(() => this.onResize(), 100);\n  }\n\n  tabFullscreenExit() {\n    const activeTab = this.state.activeTab;\n\n    activeTab.item.classList.remove('fullScreenTab');\n    this.refs.splitContentWrap.classList.remove('needFullScreenTab');\n    this.setState({\n      lastClick: null,\n      tabFullScreen: false\n    });\n    this.onResize();\n  }\n\n  tabFullscreen(newTab) {\n    const activeTab = this.state.activeTab;\n    const lastClick = this.state.lastClick;\n    const ping = Date.now() - lastClick;\n\n    if (activeTab === newTab && ping < 400) {\n      newTab.item.classList.toggle('fullScreenTab');\n      this.refs.splitContentWrap.classList.toggle('needFullScreenTab');\n      this.setState({\n        lastClick: null,\n        tabFullScreen: true\n      });\n      this.onResize();\n      return;\n    }\n\n    this.setState({lastClick: Date.now()});\n  }\n\n  tabSwitch(newTab) {\n    if (this.tabFullscreen(newTab)) {\n      return;\n    }\n\n    const activeTab = this.state.activeTab;\n\n    activeTab.item.style.display = 'none';\n    newTab.item.style.display = 'block';\n\n    this.setState({\n      activeTab: newTab\n    });\n  }\n\n  tabClose(tab, event) {\n    if (tab.name === TabNameConsole) {\n      this.setState({logs: []});\n      return;\n    }\n\n    const tabs = this.state.tabs;\n\n    const tabIndex = tabs.findIndex((tabItem) => tabItem === tab);\n\n    tabs.splice(tabIndex, 1);\n    tab.item.outerHTML = '';\n\n    const tabNext = tabs[tabIndex] || tabs[tabIndex - 1] || tabs[0];\n\n    this.tabSwitch(tabNext);\n    this.setState({tabs});\n\n    if (!event) return;\n    event.cancelBubble = true;\n    event.stopPropagation();\n    return false;\n  }\n\n\n  onResize() {\n    const editor = this.editorGet();\n    const editorWrap = this.refs.editorWrap;\n    const tabsContent = this.refs.tabsContent;\n    const tabsWrapper = tabsContent.parentNode;\n    const padding = 0;\n    if (!editorWrap) return;\n\n    editor.style.width = editorWrap.clientWidth + 'px';\n    editor.style.height = editorWrap.clientHeight - padding + 'px';\n    this.setState({\n      editorWidth: String(editorWrap.clientWidth + ''),\n      editorHeight: String(editorWrap.clientHeight - padding),\n    });\n\n    tabsContent.style.height = tabsWrapper.clientHeight - tabsWrapper.firstChild.clientHeight + 'px';\n  }\n\n  onApiReady() {\n    if (this.state.apiReady) {\n      return false;\n    }\n\n    const authData = this.state.authData;\n    authData['-0'] =  this.api.access_token;\n    this.setState({ apiReady: true, authData });\n\n    this.codeLoad(this.state.hash);\n    return true;\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', () => this.onResize());\n    this.onResize();\n\n    const firstTab = {\n      type: TabTypeConsole,\n      name: TabNameConsole,\n      item: this.refs.consoleOutput\n    };\n\n    this.setState({\n      activeTab: firstTab,\n      tabs: [firstTab]\n    });\n  }\n\n  auth(scope, group_id) {\n    group_id = group_id || 0;\n    const authKey = [scope, group_id].join('-');\n    return Promise.resolve().then(() => {\n      if (this.state.authData[authKey]) {\n        const access_token = this.state.authData[authKey];\n        return { data: { access_token }};\n      }\n\n      const opts = { ...this.opts, scope };\n      let method = 'VKWebAppGetAuthToken';\n\n      if (group_id) {\n        opts.group_id = group_id;\n        method = 'VKWebAppGetCommunityAuthToken';\n      }\n\n      return connectPromise.send(method, opts);\n    }).then((data) => {\n      const token = data.data.access_token;\n      const authData = this.state.authData;\n      authData[authKey] = token;\n      this.setState({ authData });\n      return token;\n    })\n  }\n\n  promptSubmit(value) {\n    this.state.promptCallback(value);\n    this.setState({\n      popout: null,\n      promptValue: null,\n      promptCallback: null,\n    });\n  }\n\n  prompt(callback, title, value) {\n    value = value || '';\n\n    this.setState({\n      promptValue: value,\n      promptCallback: callback,\n      popout: (\n        <Alert\n          actionsLayout=\"vertical\"\n          actions={[{\n            title: 'Отмена',\n            style: 'cancel',\n            autoclose: true,\n          }, {\n            title: 'Ок',\n            action: () => this.promptSubmit(this.state.promptValue)\n          }]}\n          onClose={() => this.promptSubmit(null)}\n        >\n          <h2>Подтвердите действие</h2>\n          <p>{title}</p>\n          <ScrollArea selector='input'>\n            <Input defaultValue={value} onChange={(event) => this.setState({promptValue: event.target.value})}/>\n          </ScrollArea>\n        </Alert>\n      )\n    });\n  }\n\n  alert(callback, data) {\n    this.setState({\n      popout: (\n        <Alert\n          actionsLayout=\"vertical\"\n          actions={[{\n            title: 'OK',\n            autoclose: true,\n          }]}\n          onClose={() => {\n            this.setState({popout: null});\n            callback();\n          }}\n        >\n          <h2>Подтвердите действие</h2>\n          <div className=\"alertContentWarp\">\n              {data}\n          </div>\n        </Alert>\n      )\n    });\n  }\n\n  showExamples() {\n    this.setState({\n      popout:\n        <ActionSheet\n          onClose={() => this.setState({popout: null})}\n          title=\"Настройки\"\n        >\n          <ActionSheetItem autoclose onClick={() => this.codeLoad('sendKeyboard')}>Отправка клавиатуры, vk connect, close</ActionSheetItem>\n          <ActionSheetItem autoclose onClick={() => this.codeLoad('userAuth')}>Авторизация пользователя</ActionSheetItem>\n          <ActionSheetItem autoclose onClick={() => this.codeLoad('groupAuth')}>Авторизация группы</ActionSheetItem>\n          <ActionSheetItem autoclose theme=\"destructive\">Закрыть</ActionSheetItem>\n        </ActionSheet>\n    });\n  }\n\n  openDebugSettings() {\n    this.setState({\n      popout:\n        <ActionSheet\n          onClose={() => this.setState({popout: null})}\n          title=\"Настройки\"\n        >\n          <ActionSheetItem autoclose onClick={() => debugApp()}>Загрузить консоль</ActionSheetItem>\n          <ActionSheetItem autoclose onClick={() => this.codeView()}>Посмотреть код</ActionSheetItem>\n          <ActionSheetItem autoclose onClick={() => this.auth().catch(() => 0)}>Сменить токен</ActionSheetItem>\n          <ActionSheetItem autoclose theme=\"destructive\">Закрыть</ActionSheetItem>\n        </ActionSheet>\n    });\n  }\n\n  openSettings() {\n    this.setState({\n      popout:\n        <ActionSheet\n          onClose={() => this.setState({popout: null})}\n          title=\"Настройки\"\n        >\n          <ActionSheetItem theme=\"destructive\" autoclose onClick={() => this.openDebugSettings()}>Debug меню</ActionSheetItem>\n          <ActionSheetItem autoclose onClick={() => this.showExamples()}>Примеры скриптов</ActionSheetItem>\n          {/*<ActionSheetItem autoclose onClick={() => this.codeSaveWindow()}>Сохранить скрипт</ActionSheetItem>*/}\n          <ActionSheetItem autoclose onClick={() => this.codeBeautify()}>Сделать красиво</ActionSheetItem>\n          <ActionSheetItem autoclose onClick={() => this.editorToggle()}>Сменить редактор</ActionSheetItem>\n          <ActionSheetItem autoclose theme=\"destructive\">Закрыть</ActionSheetItem>\n        </ActionSheet>\n    });\n  }\n\n  getTitle() {\n    if (this.state.tabFullScreen ) {\n      return this.state.activeTab.name;\n    }\n\n    if (this.state.hash) {\n      return this.state.hash;\n    }\n\n     return 'VKScripts Lite';\n  }\n\n  render() {\n    return (\n      <View activePanel=\"tabs\" popout={this.state.popout}>\n        <Panel id=\"tabs\" className=\"panelWrapper\">\n          <PanelHeaderFull\n            isWeb={window.isWeb}\n            ref=\"header\"\n            left={this.state.tabFullScreen ? (\n              <HeaderButton\n                onClick={() => this.tabFullscreenExit()}\n                key=\"toggle_tabState\"\n              >\n                <Icon24Unpin/>\n              </HeaderButton>\n            ) : (\n              <HeaderButton\n                onClick={() => this.openSettings()}\n                key=\"toggle_editor\"\n              >\n                <Icon24Settings/>\n              </HeaderButton>\n            )}\n          >\n            {this.getTitle()}\n          </PanelHeaderFull>\n          <div className=\"splitContentWrap\" ref='splitContentWrap'>\n            <div ref=\"editorWrap\" className=\"editorWrap\">\n              {this.state.editorType !== 'ace' ? (\n                <textarea\n                  onChange={(e) => this.codeOnUpdate(e.target.value)}\n                  defaultValue={this.state.value}\n                  ref=\"editorTextarea\"\n                />\n              ) : (\n                <AceEditor\n                  mode=\"javascript\"\n                  theme={this.state.dark ? \"tomorrow_night\" : \"chrome\"}\n                  onChange={(e) => this.codeOnUpdate(e)}\n                  className=\"editor\"\n                  value={this.state.value}\n                  name=\"ace_editor\"\n                  width={this.state.editorWidth}\n                  height={this.state.editorHeight}\n                  ref=\"editorAce\"\n                  editorProps={{$blockScrolling: true}}\n                  enableBasicAutocompletion={true}\n                  enableLiveAutocompletion={true}\n                  showPrintMargin={false}\n                />\n              )}\n            </div>\n            <div className=\"consoleTabsContainer\">\n              <Tabs type=\"buttons\">\n                <HorizontalScroll>\n                  {this.state.tabs.map((tab) =>\n                    <TabsItem\n                      key={tab.name}\n                      onClick={() => this.tabSwitch(tab)}\n                      selected={this.state.activeTab === tab}\n                    >\n                      <span>{tab.name}</span>\n                      <Icon16Cancel className=\"tabControl tabClose\" onClick={(event) => this.tabClose(tab, event)}/>\n                    </TabsItem>\n                  )}\n                  <TabsItem level=\"tertiary\" style={{zIndex: 1000}} onClick={() => this.codeStartScript()}>\n                    <Icon16Add className=\"tabControl tabStart\"/>\n                  </TabsItem>\n                </HorizontalScroll>\n              </Tabs>\n              <div className=\"tabsContent iframeWrap\" ref=\"tabsContent\">\n                <div ref=\"consoleOutput\">\n                  <Console\n                    logs={this.state.logs}\n                    styles={ConsoleStyles}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </Panel>\n      </View>\n    );\n  }\n}\n\nexport default App;\n","import \"vkappsutils/utils/setAndroidTheme\";\nimport 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vkui-connect';\nimport App from './App';\n// import registerServiceWorker from './sw';\n\n// Init VK App\nconnect.send('VKWebAppInit', {});\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT\n// registerServiceWorker();\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}